{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/assets/stylesheets/media-browser.scss?0be5","webpack:///./src/react-components/state-link.js","webpack:///./src/utils/media-url-utils.js","webpack:///./src/utils/detect-touchscreen.js","webpack:///./src/utils/is-mobile.js","webpack:///./src/react-components/auth-dialog.js","webpack:///./src/react-components/home-root.js","webpack:///./src/utils/video-utils.js","webpack:///./src/react-components/join-us-dialog.js","webpack:///./src/react-components/report-dialog.js","webpack:///./src/index.js","webpack:///./src/utils/async-utils.js","webpack:///./src/utils/i18n.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/utils/scene-url-utils.js","webpack:///./src/utils/history.js","webpack:///./src/react-components/if-feature.js","webpack:///./src/react-components/unless-feature.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/room-info-dialog.js","webpack:///./src/react-components/media-tiles.js","webpack:///./src/assets/stylesheets/index.scss?3839","webpack:///./src/assets/stylesheets/room-info-dialog.scss?711f","webpack:///./src/utils/focus-utils.js","webpack:///./src/utils/configs.js","webpack:///./src/utils/avatar-utils.js","webpack:///./src/assets/video/home.webm","webpack:///./src/assets/video/home.mp4","webpack:///./src/assets/images/discord-logo-small.png","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/images/app-logo.png","webpack:///./src/assets/images/company-logo.png","webpack:///./src/assets/images/editor-logo.png","webpack:///./src/telemetry.js","webpack:///./src/utils/name-generation.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/assets/models/DuckyMesh.glb","webpack:///./src/utils/fullscreen.js","webpack:///./src/assets/stylesheets/sign-in-dialog.scss?f596","webpack:///./src/utils/theme.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","6","exports","module","l","e","Promise","resolve","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","oe","err","console","error","jsonpArray","window","oldJsonpFunction","slice","media-browser","mediaBrowser","facets","facet","body","pager","header-center","headerCenter","search","header-left","headerLeft","engine-attribution","engineAttribution","engine-attribution-contents","engineAttributionContents","favorites-header","favoritesHeader","search-clear","searchClear","search-icon","searchIcon","box","header","no-search","noSearch","nav","nav-right-pad","navRightPad","nav-source","navSource","nav-source-selected","navSourceSelected","nav-scroll-arrow","navScrollArrow","tiles","tile","info","attribution","creator","publisher","last-joined","lastJoined","tile-link","tileLink","tile-content","tileContent","avatar-tile","avatarTile","favorite","tile-actions","tileActions","presence","create-tile","createTile","create-avatar-tile","createAvatarTile","tiles-variable","tilesVariable","page-number","pageNumber","pager-button-disabled","pagerButtonDisabled","header-right","headerRight","create-button","createButton","create-link","createLink","empty-string","emptyString","media-browser-inline","mediaBrowserInline","StateLink","React","Component","handleClick","event","history","_this","this","props","onClick","defaultPrevented","button","target","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","replace","replaceHistoryState","pushHistoryState","stateKey","stateValue","stateDetail","render","innerRef","className","title","children","react__WEBPACK_IMPORTED_MODULE_0___default","a","createElement","href","ref","PropTypes","bool","string","func","node","nonCorsProxyDomains","configs","NON_CORS_PROXY_DOMAINS","split","CORS_PROXY_SERVER","commonKnownContentTypes","gltf","glb","png","jpg","jpeg","pdf","mp4","mp3","basis","farsparkEncodeUrl","url","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","scaledThumbnailUrlFor","width","height","extension","pathParts","URL","pathname","extensionCandidate","pop","thumbnailUrl","THUMBNAIL_SERVER","urlHostname","hostname","hasReticulumServer","RETICULUM_SERVER","isNonCorsProxyDomain","find","domain","endsWith","proxiedUrlFor","startsWith","parsedUrl","getAbsoluteHref","baseUrl","relativeUrl","getAbsoluteUrl","getCustomGLTFParserURLResolver","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","substring","path","join","dataUrlRegex","guessContentType","matches","exec","location","originIsHubsServer","Map","isHubsServer","origin","has","fetch","method","headers","set","hubsSceneRegex","hubsAvatarRegex","_wrapRegExp","id","hubsRoomRegex","isLocalHubsUrl","_ref","_asyncToGenerator","document","_x2","arguments","isHubsSceneUrl","_ref2","_x3","isLocalHubsSceneUrl","_ref3","_x4","isHubsAvatarUrl","_ref4","_x5","isLocalHubsAvatarUrl","_ref5","_x6","isHubsRoomUrl","_ref6","_x7","idForAvatarUrl","match","groups","__webpack_exports__","hackyMobileSafariTest","hackyMobileSafariTestValue","navigator","userAgent","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","media","UA","detectTouchScreen","isMobile","_isMobile","vendor","opera","substr","platform","mockUserAgent","isTablet","AuthDialog","authOrigin","verifying","verified","formatMessage","intl","react_default","dialog_container","_extends","closable","index_es","injectIntl","addLocaleData","en","checkIsMobile","HomeRoot","constructor","super","home_root_defineProperty","dialog","signedIn","mailingListEmail","mailingListPrivacy","DialogClass","setState","_objectSpread","onClose","closeDialog","showDialog","hubEntry","RoomInfoDialog","hubName","hubDescription","description","videoEl","querySelector","playbackRate","toggleVideo","hasFocus","play","pause","addEventListener","playVideoWithStopOnBlur","messageId","signInReason","signInDestination","SignInDialog","message","messages","onSignIn","email","authComplete","authChannel","startAuthentication","authStarted","signInDestinationUrl","isLocalClient","_x","signOut","trigger","stopPropagation","state","componentDidMount","authVerify","showAuthDialog","verifyAuth","then","showSignIn","showSignInDialog","loadHomeVideo","_this2","AuthChannel","store","setSocket","connectToReticulum","verifyAuthentication","authTopic","authToken","authPayload","credentials","warn","mainContentClassNames","classNames","[object Object]","styles","mainContent","noninteractive","locale","lang","home","headerContent","titleAndNav","links","if_feature","rel","link","showAdmin","react_fontawesome_index_es","icon","faCog","signIn","maskEmail","onLinkClicked","heroContent","style","backgroundImage","image","hideHero","featuredRooms","renderFeaturedRoomsHero","renderNonFeaturedRoomsHero","heroPanel","rightPanel","secondaryLink","src","discordLogoSmall","footerContent","poweredBy","unless_feature","prefix","top","feature","companyLogo","renderPwaButton","secondaryButton","installEvent","installed","visibility","prompt","userChoice","choiceResult","outcome","faPlus","renderCreateButton","primaryButton","ctaButton","createAndRedirectToNewHub","container","logo","logoMargin","ctaButtons","showCreate","mediaBrowserStyles","darkened","media_tiles","entries","handleEntryInfoClicked","showRoomInfo","urlSource","blurb","array","publicRoomsResult","JoinUsDialog","join_us_dialog_extends","ReportDialog","report_dialog_extends","wrap_with_audio","qs","URLSearchParams","registerTelemetry","Store","APP","mountedUI","remountUI","root","home_root","returnToRoot","router","HashRouter","Fragment","Route","join_us_dialog_JoinUsDialog","report_dialog_ReportDialog","ReactDOM","getElementById","favoriteRoomsResult","all","fetchReticulumAuthenticated","credentialsAccountId","ids","map","h","filter","lastIndexOf","sort","b","member_count","src_asyncToGenerator","socket","joinParams","hub_id","token","retPhxChannel","channel","receive","perms_token","perms","jwtDecode","setIsAdmin","postgrest_role","create_hub","leave","fetchFeaturedRooms","waitForEvent","waitForDOMContentLoaded","eventName","eventObj","once","readyState","_configs__WEBPACK_IMPORTED_MODULE_0__","_assets_translations_data_json__WEBPACK_IMPORTED_MODULE_1__","navigatorLang","languages","language","userLanguage","toLowerCase","localeData","_messages","APP_CONFIG","translations","configTranslations","messageKey","_match","subkey","reduce","acc","entry","args","_defineProperty","contents","react_intl__WEBPACK_IMPORTED_MODULE_2__","signInComplete","onContinue","continueButton","continueText","onSubmit","signInForm","type","required","placeholder","onFocus","handleTextFieldFocus","onBlur","handleTextFieldBlur","onChange","emailField","terms","_if_feature__WEBPACK_IMPORTED_MODULE_4__","nextButton","_dialog_container__WEBPACK_IMPORTED_MODULE_6__","reader","getReader","read","readChunk","done","cancel","isValidSceneUrl","_isValidSceneUrl","trim","_isValidGLB","isValidGLB","allowDisplayOfSceneLink","scene","account_id","allow_promotion","allow_remixing","pushOrUpdateHistory","k","v","detail","newPathname","newSearch","newLength","__historyLength","__duplicate","undefined","isDuplicate","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","withSlug","IfFeature","_utils_configs__WEBPACK_IMPORTED_MODULE_0__","UnlessFeature","hubChannel","update","resetToRandomDefaultAvatar","_signedIn","reject","onError","on","payload","handleAuthCredentials","_this3","uuid","_this4","DialogContainer","currentTarget","onKeyDown","onContainerClicked","componentWillUnmount","removeEventListener","noOverlay","wide","allowOverflow","additionalClass","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_4__","faTimes","isRequired","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","createContext","sound","Consumer","context","cloneElement","onMouseEnter","playSound","propTypes","emailParts","emailIdentity","emailDomain","Math","min","hasDescription","hasScene","showSceneLink","toAttributionDiv","source","includes","attributionName","attributionAuthor","author","attributions","content","_dialog_container_js__WEBPACK_IMPORTED_MODULE_3__","hubTitle","subtitle","roomInfo","sceneScreenshot","screenshot_url","sceneDetails","sceneMain","sceneName","sceneCreator","sceneAttributions","sceneButtons","dayjs","extend","relativeTime","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","poly_model","twitch_stream","MediaTiles","remixAvatar","onCopyAvatar","parent_scene_id","onCopyScene","isImage","isAvatar","imageAspect","clientWidth","innerWidth","imageWidth","imageHeight","floor","max","idx","imageSrc","images","preview","isHub","getTileDimensions","thumbnailElement","muted","autoPlay","playsInline","loop","publisherName","handleEntryClicked","_state_link__WEBPACK_IMPORTED_MODULE_20__","avatarId","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_6__","faPencilAlt","onShowSimilar","faSearch","handleCopyAvatar","faClone","handleCopyScene","project_id","getReticulumFetchUrl","faInfo","favorited","faStar","faExternalLinkAlt","react_intl__WEBPACK_IMPORTED_MODULE_5__","last_activated_at","fromNow","faUsers","hasNext","hasPrevious","page","isVariableWidth","createTileWidth","createTileHeight","_if_feature__WEBPACK_IMPORTED_MODULE_17__","dispatchEvent","CustomEvent","entryToTile","handlePager","previousPage","faAngleLeft","nextPage","faAngleRight","number","hero-content","cta-buttons","primary-button","secondary-button","loading-text","loadingText","main-content","header-content","title-and-nav","sign-in","video-container","videoContainer","background-video","backgroundVideo","logo-margin","hero-panel","cta-button","hero-video","heroVideo","have-code","haveCode","secondary-link","footer-content","powered-by","company-logo","bottom","room-info","scene-screenshot","scene-details","scene-main","scene-name","scene-creator","scene-attributions","attribution-name","attribution-author","hub-title","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","detect","require","browser","isExitingFullscreenDueToFocus","AFRAME","utils","device","screenfull","isFullscreen","isMobileVR","exit","focus","select","showFullScreenIfWasFullScreen","pdfjs_dist__WEBPACK_IMPORTED_MODULE_3__","pdfjs_dist__WEBPACK_IMPORTED_MODULE_3___default","isAdmin","forEach","x","el","getAttribute","process","__webpack_public_path__","pdfjs","GlobalWorkerOptions","workerSrc","AVAILABLE_INTEGRATIONS","theme","colorVars","innerHTML","head","prepend","features","featureName","enableAll","localDevImages","imageName","cssUrl","linkName","defaultValue","_isAdmin","AVATARS_API","AVATAR_TYPES","SKINNABLE","getAvatarType","resp","avatars","fetchAvatar","_fetchAvatar","fetchSkinnableAvatar","avatar_id","gltf_url","avatar","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_getAvatarThumbnailUrl","files","thumbnail","MAT_NAME","ensureAvatarMaterial","materials","materialForMesh","mesh","primitives","primitive","material","nodes","scenes","meshes","concat","_remixAvatar","parentId","parent_avatar_listing_id","names","chooseRandom","arr","random","fetchRandomDefaultAvatarId","_fetchRandomDefaultAvatarId","defaultAvatars","ducky","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","profile","additionalProperties","properties","displayName","pattern","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","preferences","muteMicOnEntry","enableOnScreenJoystickLeft","enableOnScreenJoystickRight","onlyShowNametagsInFreeze","allowMultipleHubsInstances","maxResolutionWidth","maxResolutionHeight","globalVoiceVolume","globalMediaVolume","snapRotationDegrees","materialQualitySetting","disableMovement","disableBackwardsMovement","disableStrafing","disableTeleporter","disableAutoPixelRatio","confirmedDiscordRooms","items","confirmedBroadcastedRooms","uploadPromotionTokens","fileId","promotionToken","creatorAssignmentTokens","hubId","creatorAssignmentToken","embedTokens","embedToken","onLoadActions","action","$ref","EventTarget","exp","Date","now","store_asyncToGenerator","_shouldResetAvatarOnInit","localStorage","getItem","setItem","JSON","stringify","oauthFlowCredentials","Cookies","getJSON","remove","_signOutOnExpiredAuthToken","parse","sub","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","sceneEl","emit","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","validate","Error","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","_utils_configs__WEBPACK_IMPORTED_MODULE_1__","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","log","Raven","config","install","adjectives","nouns","generateHubName","randItem","charAt","toUpperCase","host","resolverLink","directReticulumHostAndPort","reticulumMeta","invalidatedReticulumMetaThisSession","absolute","port","getReticulumMeta","_getReticulumMeta","version","pool","phx_host","res","json","phxHostOverride","RETICULUM_SOCKET_SERVER","protocol","getDirectReticulumFetchUrl","invalidateReticulumMeta","_invalidateReticulumMeta","_connectToReticulum","debug","params","socketClass","Socket","getNewSocketUrl","refreshDirectReticulumHostAndPort","RETICULUM_SOCKET_PROTOCOL","socketUrl","socketSettings","logger","kind","msg","connect","endPointPath","endPoint","newEndPoint","getLandingPageForPhoto","photoUrl","retUrl","content-type","authorization","text","_createAndRedirectToNewHub","sceneId","createUrl","hub","scene_id","creator_assignment_token","embed_token","BASE_ASSETS_PATH","getPresenceEntryForSession","presences","sessionId","metas","getPresenceContextForSession","getPresenceProfileForSession","migrateChannelToSocket","oldChannel","topic","bindings","item","callback","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","status","discordBridgesForPresences","channels","values","discordBridges","Array","hasEnteredFullScreenThisSession","shouldShowFullScreen","isIOS","enabled","willRequireUserGesture","showFullScreenIfAvailable","_showFullScreenIfAvailable","request","_showFullScreenIfWasFullScreen","email-field","next-button","continue-button","sign-in-form","sign-in-complete","applyThemeToTextButton","getThemeColor","_async_utils__WEBPACK_IMPORTED_MODULE_0__","DEFAULT_COLORS","action-color","action-label-color","action-color-disabled","action-color-highlight","action-text-color","action-subtitle-color","notice-background-color","notice-text-color","favorited-color","highlighted","setAttribute","classList","add","actionColor","actionHoverColor"],"mappings":"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,WACA,aACA,WACA,SACA,UACA,UACA,OACA,QACA,QACA,UACA,OACA,YACA,WACA,SACA,WACA,OACA,WACA,WACA,SACA,QACA,YACA,MACA,WACA,SACA,UACA,QACA,WACA,WACA,QACA,QACA,MACA,QACA,YACA,OACA,UACA,SACA,cACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,aACA,SACA,WACA,UACA,WACA,SACA,YACA,UACA,QACA,OACA,OACA,QACA,YACA,QACA,SACA,SACA,QACA,UACA,aACA,SACA,cACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,WACA,cACA,cACA,OACA,SACA,QACA,YACA,UACA,WACA,SACA,WACA,eACA,aACA,OACA,SACA,MACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,SACA,WACA,OACA,UACA,aACA,aACA,YACA,YACA,UACA,SACA,UACA,aACA,aACA,OACA,YACA,WACA,WACA,SACA,YACA,WACA,aACA,aACA,cACA,UACA,UACA,OACA,QACA,QACA,SACA,OACA,WACA,OACA,YACA,QACA,UACA,UACA,WACA,QACA,WACA,YACA,QACA,YACA,QACA,OACA,YACA,aACA,QACA,SACA,SACA,QACA,QACA,QACA,MACA,QACA,WACA,QACA,WACA,QACA,WACA,UACA,SACA,OACA,QACA,MACA,UACA,QACA,UACA,QACA,QACA,QACA,WACA,WACA,SACA,WACA,WACA,cACA,gBACA,WACA,aACA,QACA,aACA,YACA,cACA,WACA,aACA,UACA,YACA,UACA,YACA,YACA,aACA,YACA,WACA,OACA,WACA,OACA,YACA,QACA,SACA,WACA,WACA,SACA,SACA,OACA,WACA,WACA,UACA,YACA,SACA,UACA,YACA,aACA,QACA,SACA,eACA,UACA,QACA,SACA,UACA,YACA,OACA,MACA,UACA,UACA,WACA,WACA,QACA,QACA,WACA,SACA,WACA,WACA,aACA,SACA,aACA,cACA,SACA,aACA,WACA,SACA,SACA,OACA,QACA,SACA,SACA,SACA,UACA,OACA,WACA,QACA,aACA,SACA,UACA,UACA,WACA,YACA,YACA,QACA,UACA,YACA,QACA,SACA,UACA,UACA,UACA,UACA,OACA,QACA,OACA,SACA,YACA,UACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,WACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,SACA,YACA,UACA,OACA,WACA,QACA,YACA,WACA,WACA,QACA,QACA,SACA,OACA,YACA,SACA,eACA,aACA,WACA,SACA,SACA,YACA,SACA,OACA,WACA,YACA,QACA,QACA,OACA,OACA,QACA,SACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,YACA,WACA,UACA,cACA,QACA,YACA,OACA,QACA,WACA,OACA,QACA,OACA,gBACA,UACA,YACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,OACA,UACA,OACA,QACA,SACA,SACA,SACA,WACA,SACA,SACA,OACA,OACA,UACA,UACA,QACA,SACA,eACA,cACA,WACA,UACA,cACA,SACA,YACA,SACA,cACA,aACA,YACA,SACA,QACA,SACA,WACA,QACA,UACA,WACA,YACA,YACA,cACA,QACA,OACA,YACA,YACA,YACA,YACA,aACA,YACA,WACA,QACA,OACA,WACA,QACA,WACA,aACA,SACA,WACA,WACA,SACA,YACA,UACA,UACA,aACA,MACA,OACA,aACA,WACA,WACA,YACA,cACA,QACA,QACA,UACA,gBACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,SACA,UACA,WACA,WACA,SACA,UACA,UACA,WACA,UACA,QACA,aACA,aACA,QACA,iBACA,UACA,SACA,SACA,WACA,SACA,QACA,SACA,QACA,cACA,WACA,UACA,SACA,WACA,WACA,QACA,UACA,YACA,aACA,aACA,SACA,SACA,UACA,SACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,aACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,OACA,UACA,SACA,WACA,QACA,QACA,OACA,cACA,YACA,WACA,UACA,WACA,SACA,cACA,SACA,SACA,WACA,OACA,WACA,QACA,QACA,UACA,QACA,QACA,SACA,YACA,SACA,cACA,cACA,QACA,QACA,QACA,QACA,WACA,WACA,YACA,eACA,aACA,aACA,OACA,aACA,cACA,YACA,SACA,QACA,UACA,WACA,OACA,OACA,UACA,WACA,SACA,aACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,aACA,YACA,QACA,QACA,cACA,UACA,WACA,cACA,SACA,WACA,OACA,SACA,OACA,SACA,WACA,QACA,QACA,UACA,aACA,SACA,WACA,MACA,QACA,YACA,UACA,OACA,UACA,OACA,WACA,OACA,QACA,UACA,QACA,OACA,SACA,WACA,SACA,OACA,UACA,SACA,cACA,YACA,UAGIC,EAAQ,CACZ,QACA,OACA,QACA,WACA,QACA,OACA,SACA,QACA,YACA,SACA,eACA,WACA,QACA,SACA,WACA,QACA,SACA,UACA,OACA,SACA,SACA,UACA,OACA,OACA,OACA,QACA,OACA,QACA,YACA,SACA,OACA,SACA,SACA,WACA,YACA,cACA,SACA,YACA,SACA,UACA,aACA,WACA,cACA,YACA,OACA,UACA,SACA,aACA,WACA,eACA,aACA,SACA,OACA,UAGK,SAASC,IACd,MAAMC,EAAWtsB,IACf,MAAMlO,EAAIkO,EAAI8X,KAAK4C,MAAM5C,KAAKkN,SAAWhlB,EAAItP,SAC7C,OAAOoB,EAAEy6B,OAAO,GAAGC,cAAgB16B,EAAEwC,MAAM,IAG7C,SAAUg4B,EAASH,MAAeG,EAASH,MAAeG,EAASF,kVCnpB9D,SAASvuB,IACd,QAASrC,IAAQsC,iBAGZ,SAAS6I,IACd,OAAO9I,KAAwB4C,SAASlB,SAASktB,OAASjxB,IAAQsC,idAGpE,MAAM4uB,EAAejsB,SAAS1F,cAAc,KAC5C,IAwCI4xB,EAxCAC,EAAgB,KAChBC,GAAsC,EAEnC,SAAS1Q,EAAqBld,EAAM6tB,GAAW,EAAOL,EAAO,KAAMM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","file":"assets/js/index-e9183d43152a69f0dd54.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t6: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"assets/js/\" + ({}[chunkId]||chunkId) + \"-\" + {}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/hubs\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1283,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"media-browser\":\"media-browser__media-browser__2vGrK\",\"mediaBrowser\":\"media-browser__media-browser__2vGrK\",\"facets\":\"media-browser__facets__1F5su\",\"facet\":\"media-browser__facet__2tPR2\",\"body\":\"media-browser__body__FLeTs\",\"pager\":\"media-browser__pager__1uCLF\",\"header-center\":\"media-browser__header-center__362oJ\",\"headerCenter\":\"media-browser__header-center__362oJ\",\"search\":\"media-browser__search__w9byu\",\"header-left\":\"media-browser__header-left__YiCBN\",\"headerLeft\":\"media-browser__header-left__YiCBN\",\"engine-attribution\":\"media-browser__engine-attribution__3BZw3\",\"engineAttribution\":\"media-browser__engine-attribution__3BZw3\",\"engine-attribution-contents\":\"media-browser__engine-attribution-contents__1V8lP\",\"engineAttributionContents\":\"media-browser__engine-attribution-contents__1V8lP\",\"favorites-header\":\"media-browser__favorites-header__eh800\",\"favoritesHeader\":\"media-browser__favorites-header__eh800\",\"search-clear\":\"media-browser__search-clear__3Q83g\",\"searchClear\":\"media-browser__search-clear__3Q83g\",\"search-icon\":\"media-browser__search-icon__1Wmzt\",\"searchIcon\":\"media-browser__search-icon__1Wmzt\",\"box\":\"media-browser__box__xnums\",\"header\":\"media-browser__header__2ld2A\",\"no-search\":\"media-browser__no-search__2jrN5\",\"noSearch\":\"media-browser__no-search__2jrN5\",\"nav\":\"media-browser__nav__3ojr-\",\"nav-right-pad\":\"media-browser__nav-right-pad__QhiMO\",\"navRightPad\":\"media-browser__nav-right-pad__QhiMO\",\"nav-source\":\"media-browser__nav-source__3XCDH\",\"navSource\":\"media-browser__nav-source__3XCDH\",\"nav-source-selected\":\"media-browser__nav-source-selected__2roPW\",\"navSourceSelected\":\"media-browser__nav-source-selected__2roPW\",\"nav-scroll-arrow\":\"media-browser__nav-scroll-arrow__K6rUz\",\"navScrollArrow\":\"media-browser__nav-scroll-arrow__K6rUz\",\"tiles\":\"media-browser__tiles__15go5\",\"tile\":\"media-browser__tile___t1yM\",\"info\":\"media-browser__info__2zbp_\",\"name\":\"media-browser__name__3rONd\",\"attribution\":\"media-browser__attribution__1VCu7\",\"creator\":\"media-browser__creator__1zPvK\",\"publisher\":\"media-browser__publisher__2VhDz\",\"last-joined\":\"media-browser__last-joined__kZYnR\",\"lastJoined\":\"media-browser__last-joined__kZYnR\",\"tile-link\":\"media-browser__tile-link__3J-E7\",\"tileLink\":\"media-browser__tile-link__3J-E7\",\"tile-content\":\"media-browser__tile-content__3ZFtH\",\"tileContent\":\"media-browser__tile-content__3ZFtH\",\"avatar-tile\":\"media-browser__avatar-tile__2Q8Hp\",\"avatarTile\":\"media-browser__avatar-tile__2Q8Hp\",\"favorite\":\"media-browser__favorite__10lax\",\"tile-actions\":\"media-browser__tile-actions__gdUZK\",\"tileActions\":\"media-browser__tile-actions__gdUZK\",\"presence\":\"media-browser__presence__2hz2_\",\"create-tile\":\"media-browser__create-tile__3PgH0\",\"createTile\":\"media-browser__create-tile__3PgH0\",\"create-avatar-tile\":\"media-browser__create-avatar-tile__xgxgC\",\"createAvatarTile\":\"media-browser__create-avatar-tile__xgxgC\",\"tiles-variable\":\"media-browser__tiles-variable__1C77s\",\"tilesVariable\":\"media-browser__tiles-variable__1C77s\",\"page-number\":\"media-browser__page-number__36gMl\",\"pageNumber\":\"media-browser__page-number__36gMl\",\"pager-button-disabled\":\"media-browser__pager-button-disabled__2hPHk\",\"pagerButtonDisabled\":\"media-browser__pager-button-disabled__2hPHk\",\"header-right\":\"media-browser__header-right__2mLFS\",\"headerRight\":\"media-browser__header-right__2mLFS\",\"create-button\":\"media-browser__create-button__2l0du\",\"createButton\":\"media-browser__create-button__2l0du\",\"create-link\":\"media-browser__create-link__1jbNm\",\"createLink\":\"media-browser__create-link__1jbNm\",\"empty-string\":\"media-browser__empty-string__ZDY2_\",\"emptyString\":\"media-browser__empty-string__ZDY2_\",\"media-browser-inline\":\"media-browser__media-browser-inline__3WnC7\",\"mediaBrowserInline\":\"media-browser__media-browser-inline__3WnC7\"};","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { pushHistoryState, replaceHistoryState } from \"../utils/history\";\r\n\r\nfunction isModifiedEvent(event) {\r\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\r\n}\r\n\r\n/**\r\n * A history-aware link that pushes/replaces the state, but not the path, in the browser history.\r\n */\r\nclass StateLink extends React.Component {\r\n  static propTypes = {\r\n    history: PropTypes.object,\r\n    innerRef: PropTypes.object,\r\n    replace: PropTypes.bool,\r\n    stateKey: PropTypes.string,\r\n    stateValue: PropTypes.string,\r\n    stateDetail: PropTypes.object,\r\n    target: PropTypes.string,\r\n    title: PropTypes.string,\r\n    onClick: PropTypes.func,\r\n    children: PropTypes.node,\r\n    className: PropTypes.string\r\n  };\r\n\r\n  async handleClick(event, history) {\r\n    if (this.props.onClick) this.props.onClick(event);\r\n\r\n    if (\r\n      !event.defaultPrevented && // onClick prevented default\r\n      event.button === 0 && // ignore everything but left clicks\r\n      (!this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\r\n      !isModifiedEvent(event) // ignore clicks with modifier keys\r\n    ) {\r\n      event.preventDefault();\r\n      const method = this.props.replace ? replaceHistoryState : pushHistoryState;\r\n      method(history, this.props.stateKey, this.props.stateValue, this.props.stateDetail);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const { innerRef, target, className, title, children } = this.props;\r\n    return (\r\n      <a\r\n        target={target}\r\n        className={className}\r\n        title={title}\r\n        onClick={event => this.handleClick(event, this.props.history)}\r\n        href=\"#\"\r\n        ref={innerRef}\r\n      >\r\n        {children}\r\n      </a>\r\n    );\r\n  }\r\n}\r\n\r\nexport default StateLink;\r\n","import { hasReticulumServer } from \"./phoenix-utils\";\r\nimport configs from \"./configs\";\r\n\r\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\r\nif (configs.CORS_PROXY_SERVER) {\r\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER);\r\n}\r\n\r\nconst commonKnownContentTypes = {\r\n  gltf: \"model/gltf\",\r\n  glb: \"model/gltf-binary\",\r\n  png: \"image/png\",\r\n  jpg: \"image/jpeg\",\r\n  jpeg: \"image/jpeg\",\r\n  pdf: \"application/pdf\",\r\n  mp4: \"video/mp4\",\r\n  mp3: \"audio/mpeg\",\r\n  basis: \"image/basis\"\r\n};\r\n\r\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\r\nfunction b64EncodeUnicode(str) {\r\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\r\n  // into raw bytes which can be fed into btoa.\r\n  const CHAR_RE = /%([0-9A-F]{2})/g;\r\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\r\n}\r\n\r\nconst farsparkEncodeUrl = url => {\r\n  // farspark doesn't know how to read '=' base64 padding characters\r\n  // translate base64 + to - and / to _ for URL safety\r\n  return b64EncodeUnicode(url)\r\n    .replace(/=+$/g, \"\")\r\n    .replace(/\\+/g, \"-\")\r\n    .replace(/\\//g, \"_\");\r\n};\r\n\r\nexport const scaledThumbnailUrlFor = (url, width, height) => {\r\n  let extension = \"\";\r\n  try {\r\n    const pathParts = new URL(url).pathname.split(\".\");\r\n\r\n    if (pathParts.length > 1) {\r\n      const extensionCandidate = pathParts.pop();\r\n      if (commonKnownContentTypes[extensionCandidate]) {\r\n        extension = `.${extensionCandidate}`;\r\n      }\r\n    }\r\n  } catch (e) {\r\n    extension = \".png\";\r\n  }\r\n\r\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\r\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\r\n    url\r\n  )}${extension}?w=${width}&h=${height}`;\r\n\r\n  try {\r\n    const urlHostname = new URL(url).hostname;\r\n\r\n    if (hasReticulumServer()) {\r\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\r\n      if (retHostname === urlHostname) return url;\r\n    }\r\n  } catch (e) {\r\n    return thumbnailUrl;\r\n  }\r\n\r\n  return thumbnailUrl;\r\n};\r\n\r\nexport const isNonCorsProxyDomain = hostname => {\r\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\r\n};\r\n\r\nexport const proxiedUrlFor = url => {\r\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\r\n\r\n  // Skip known domains that do not require CORS proxying.\r\n  try {\r\n    const parsedUrl = new URL(url);\r\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\r\n  } catch (e) {\r\n    // Ignore\r\n  }\r\n\r\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\r\n};\r\n\r\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\r\n  return new URL(relativeUrl, baseUrl);\r\n}\r\n\r\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\r\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\r\n}\r\n\r\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\r\n  if (typeof url !== \"string\" || url === \"\") return \"\";\r\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\r\n  if (/^data:.*,.*$/i.test(url)) return url;\r\n  if (/^blob:.*$/i.test(url)) return url;\r\n\r\n  if (configs.CORS_PROXY_SERVER) {\r\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\r\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\r\n\r\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\r\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\r\n      const originalUrlParts = originalUrl.split(\"/\");\r\n\r\n      // Drop the .gltf filename\r\n      const path = new URL(url).pathname;\r\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\r\n      return corsProxyPrefix + assetUrl;\r\n    }\r\n  }\r\n\r\n  return url;\r\n};\r\n\r\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\r\n\r\nexport const guessContentType = url => {\r\n  if (!url) return;\r\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\r\n  if (url.startsWith(\"data:\")) {\r\n    const matches = dataUrlRegex.exec(url);\r\n    if (matches.length > 0) {\r\n      matches[1];\r\n    }\r\n  }\r\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\r\n  return commonKnownContentTypes[extension];\r\n};\r\n\r\nconst originIsHubsServer = new Map();\r\nasync function isHubsServer(url) {\r\n  if (!url) return false;\r\n  if (!url.startsWith(\"http\")) {\r\n    url = \"https://\" + url;\r\n  }\r\n  const { origin } = new URL(url);\r\n\r\n  if (originIsHubsServer.has(origin)) {\r\n    return originIsHubsServer.get(origin);\r\n  }\r\n\r\n  let isHubsServer;\r\n  try {\r\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\r\n  } catch (e) {\r\n    isHubsServer = false;\r\n  }\r\n  originIsHubsServer.set(origin, isHubsServer);\r\n  return isHubsServer;\r\n}\r\n\r\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/(\\w+)\\/?\\S*/;\r\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>\\w+)\\/?\\S*/;\r\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/([a-zA-Z0-9]{7})\\/?\\S*/;\r\n\r\nexport const isLocalHubsUrl = async url =>\r\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\r\n\r\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\r\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\r\n\r\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\r\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\r\n\r\nexport const isHubsRoomUrl = async url =>\r\n  (await isHubsServer(url)) && !(await isHubsAvatarUrl(url)) && !(await isHubsSceneUrl(url)) && hubsRoomRegex.test(url);\r\n\r\nexport const isHubsDestinationUrl = async url =>\r\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\r\n\r\nexport const idForAvatarUrl = url => {\r\n  const match = url.match(hubsAvatarRegex);\r\n  if (match) {\r\n    return match.groups.id;\r\n  }\r\n  return null;\r\n};\r\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\r\nfunction detectTouchScreen() {\r\n  let hasTouchScreen = false;\r\n  if (\"maxTouchPoints\" in navigator) {\r\n    hasTouchScreen = navigator.maxTouchPoints > 0;\r\n  } else if (\"msMaxTouchPoints\" in navigator) {\r\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\r\n  } else {\r\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\r\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\r\n      hasTouchScreen = !!mQ.matches;\r\n    } else if (\"orientation\" in window) {\r\n      hasTouchScreen = true; // deprecated, but good fallback\r\n    } else {\r\n      // Only as a last resort, fall back to user agent sniffing\r\n      const UA = navigator.userAgent;\r\n      hasTouchScreen =\r\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\r\n    }\r\n  }\r\n  return hasTouchScreen;\r\n}\r\n\r\nlet hackyMobileSafariTestValue = null;\r\n\r\n// HACK for https://github.com/mozilla/hubs/issues/1813\r\n// Touchscreen controls depend on iPad and iPhone detection,\r\n// which recently regressed. For UA matching \"Macintosh\", enable\r\n// touchscreen controls if there exists a touchscreen.\r\n// We cannot always enable touchscreen controls when a touchscreen\r\n// is present until we fix conflicts between simultaneous mouse\r\n// and touchscreen interactions.\r\nexport function hackyMobileSafariTest() {\r\n  if (hackyMobileSafariTestValue === null) {\r\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\r\n  }\r\n\r\n  return hackyMobileSafariTestValue;\r\n  // e.g. Match\r\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\r\n  // but not\r\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\r\n}\r\n","import { hackyMobileSafariTest } from \"./detect-touchscreen\";\r\n\r\n// lifted from https://github.com/aframevr/aframe/blob/master/src/utils/device.js to ensure consistency\r\nfunction isIOS() {\r\n  return /iPad|iPhone|iPod/.test(window.navigator.platform);\r\n}\r\n\r\nfunction isTablet(mockUserAgent) {\r\n  const userAgent = mockUserAgent || window.navigator.userAgent;\r\n  return /ipad|Nexus (7|9)|xoom|sch-i800|playbook|tablet|kindle/i.test(userAgent);\r\n}\r\n\r\nfunction isR7() {\r\n  return /R7 Build/.test(window.navigator.userAgent);\r\n}\r\n\r\nconst isMobile = (function() {\r\n  let _isMobile = false;\r\n  (function(a) {\r\n    // eslint-disable-next-line no-useless-escape\r\n    if (\r\n      /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(\r\n        a\r\n      ) ||\r\n      /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(\r\n        a.substr(0, 4)\r\n      )\r\n    ) {\r\n      _isMobile = true;\r\n    }\r\n    if (isIOS() || isTablet() || isR7()) {\r\n      _isMobile = true;\r\n    }\r\n    if (hackyMobileSafariTest()) {\r\n      _isMobile = true;\r\n    }\r\n  })(window.navigator.userAgent || window.navigator.vendor || window.opera);\r\n\r\n  return function() {\r\n    return _isMobile;\r\n  };\r\n})();\r\n\r\nexport default isMobile;\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { injectIntl, FormattedMessage } from \"react-intl\";\r\nimport DialogContainer from \"./dialog-container.js\";\r\n\r\nclass AuthDialog extends Component {\r\n  static propTypes = {\r\n    intl: PropTypes.object,\r\n    verifying: PropTypes.bool,\r\n    verified: PropTypes.bool,\r\n    authOrigin: PropTypes.string\r\n  };\r\n\r\n  render() {\r\n    const { authOrigin, verifying, verified } = this.props;\r\n    const { formatMessage } = this.props.intl;\r\n    const title = verifying || !verified ? \"\" : formatMessage({ id: \"auth.verified-title\" });\r\n\r\n    if (!verifying && !verified) {\r\n      return (\r\n        <DialogContainer title={title} closable={true} {...this.props}>\r\n          <FormattedMessage className=\"preformatted\" id=\"auth.verify-failed\" />\r\n        </DialogContainer>\r\n      );\r\n    } else {\r\n      return (\r\n        <DialogContainer title={title} closable={!verifying} {...this.props}>\r\n          {verifying ? (\r\n            <div className=\"loader-wrap loader-mid\">\r\n              <div className=\"loader\">\r\n                <div className=\"loader-center\" />\r\n              </div>\r\n            </div>\r\n          ) : authOrigin === \"spoke\" ? (\r\n            <FormattedMessage className=\"preformatted\" id=\"auth.spoke-verified\" />\r\n          ) : (\r\n            <FormattedMessage className=\"preformatted\" id=\"auth.verified\" />\r\n          )}\r\n        </DialogContainer>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default injectIntl(AuthDialog);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport en from \"react-intl/locale-data/en\";\r\n\r\nimport configs from \"../utils/configs\";\r\nimport IfFeature from \"./if-feature\";\r\nimport UnlessFeature from \"./unless-feature\";\r\nimport { lang, messages } from \"../utils/i18n\";\r\nimport { playVideoWithStopOnBlur } from \"../utils/video-utils.js\";\r\nimport homeVideoWebM from \"../assets/video/home.webm\";\r\nimport homeVideoMp4 from \"../assets/video/home.mp4\";\r\nimport discordLogoSmall from \"../assets/images/discord-logo-small.png\";\r\nimport classNames from \"classnames\";\r\nimport { isLocalClient, createAndRedirectToNewHub, connectToReticulum } from \"../utils/phoenix-utils\";\r\nimport maskEmail from \"../utils/mask-email\";\r\nimport checkIsMobile from \"../utils/is-mobile\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\r\nimport { faCog } from \"@fortawesome/free-solid-svg-icons/faCog\";\r\nimport mediaBrowserStyles from \"../assets/stylesheets/media-browser.scss\";\r\nimport AuthChannel from \"../utils/auth-channel\";\r\nimport RoomInfoDialog from \"./room-info-dialog.js\";\r\n\r\nimport styles from \"../assets/stylesheets/index.scss\";\r\n\r\nimport AuthDialog from \"./auth-dialog.js\";\r\nimport SignInDialog from \"./sign-in-dialog.js\";\r\nimport MediaTiles from \"./media-tiles\";\r\n\r\naddLocaleData([...en]);\r\n\r\nconst isMobile = checkIsMobile();\r\n\r\nclass HomeRoot extends Component {\r\n  static propTypes = {\r\n    intl: PropTypes.object,\r\n    store: PropTypes.object,\r\n    authChannel: PropTypes.object,\r\n    authVerify: PropTypes.bool,\r\n    authTopic: PropTypes.string,\r\n    authToken: PropTypes.string,\r\n    authPayload: PropTypes.string,\r\n    authOrigin: PropTypes.string,\r\n    installEvent: PropTypes.object,\r\n    hideHero: PropTypes.bool,\r\n    showAdmin: PropTypes.bool,\r\n    showCreate: PropTypes.bool,\r\n    featuredRooms: PropTypes.array,\r\n    publicRoomsResult: PropTypes.object,\r\n    showSignIn: PropTypes.bool,\r\n    signInDestination: PropTypes.string,\r\n    signInDestinationUrl: PropTypes.string,\r\n    signInReason: PropTypes.string\r\n  };\r\n\r\n  state = {\r\n    dialog: null,\r\n    signedIn: null,\r\n    mailingListEmail: \"\",\r\n    mailingListPrivacy: false\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.state.signedIn = props.authChannel.signedIn;\r\n    this.state.email = props.authChannel.email;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.authVerify) {\r\n      this.showAuthDialog(true, false);\r\n\r\n      this.verifyAuth().then(verified => {\r\n        this.showAuthDialog(false, verified);\r\n      });\r\n      return;\r\n    }\r\n    if (this.props.showSignIn) {\r\n      this.showSignInDialog(false);\r\n    }\r\n    this.loadHomeVideo();\r\n  }\r\n\r\n  async verifyAuth() {\r\n    const authChannel = new AuthChannel(this.props.store);\r\n    authChannel.setSocket(await connectToReticulum());\r\n\r\n    try {\r\n      await authChannel.verifyAuthentication(this.props.authTopic, this.props.authToken, this.props.authPayload);\r\n      this.setState({ signedIn: true, email: this.props.store.state.credentials.email });\r\n      return true;\r\n    } catch (e) {\r\n      // Error during verification, likely invalid/expired token\r\n      console.warn(e);\r\n      return false;\r\n    }\r\n  }\r\n\r\n  showDialog = (DialogClass, props = {}) => {\r\n    this.setState({\r\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\r\n    });\r\n  };\r\n\r\n  showAuthDialog = (verifying, verified) => {\r\n    this.showDialog(AuthDialog, { verifying, verified, authOrigin: this.props.authOrigin });\r\n  };\r\n\r\n  showRoomInfo = hubEntry => {\r\n    this.showDialog(RoomInfoDialog, {\r\n      hubName: hubEntry.name,\r\n      hubDescription: hubEntry.description\r\n    });\r\n  };\r\n\r\n  loadHomeVideo = () => {\r\n    const videoEl = document.querySelector(\"#background-video\");\r\n    if (!videoEl) return;\r\n    videoEl.playbackRate = 0.9;\r\n    playVideoWithStopOnBlur(videoEl);\r\n  };\r\n\r\n  closeDialog = () => {\r\n    this.setState({ dialog: null });\r\n  };\r\n\r\n  showSignInDialog = (closable = true) => {\r\n    let messageId = \"sign-in.prompt\";\r\n\r\n    if (this.props.signInReason === \"admin_no_permission\") {\r\n      messageId = \"sign-in.admin-no-permission\";\r\n    } else if (this.props.signInDestination === \"admin\") {\r\n      messageId = \"sign-in.admin\";\r\n    } else if (this.props.signInDestination === \"hub\") {\r\n      messageId = \"sign-in.hub\";\r\n    }\r\n\r\n    this.showDialog(SignInDialog, {\r\n      message: messages[messageId],\r\n      closable: closable,\r\n      onSignIn: async email => {\r\n        const { authComplete } = await this.props.authChannel.startAuthentication(email);\r\n        this.showDialog(SignInDialog, { authStarted: true });\r\n        await authComplete;\r\n        this.setState({ signedIn: true, email });\r\n        this.closeDialog();\r\n\r\n        if (this.props.signInDestinationUrl) {\r\n          document.location = this.props.signInDestinationUrl;\r\n        } else if (this.props.signInDestination === \"admin\") {\r\n          document.location = isLocalClient() ? \"/admin.html\" : \"/admin\";\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  signOut = () => {\r\n    this.props.authChannel.signOut();\r\n    this.setState({ signedIn: false });\r\n  };\r\n\r\n  onLinkClicked = trigger => {\r\n    return e => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      trigger();\r\n    };\r\n  };\r\n\r\n  render() {\r\n    const mainContentClassNames = classNames({\r\n      [styles.mainContent]: true,\r\n      [styles.noninteractive]: !!this.state.dialog\r\n    });\r\n\r\n    const showFTUEVideo = false;\r\n\r\n    return (\r\n      <IntlProvider locale={lang} messages={messages}>\r\n        <div className={styles.home}>\r\n          <div className={mainContentClassNames}>\r\n            <div className={styles.headerContent}>\r\n              <div className={styles.titleAndNav} onClick={() => (document.location = \"/\")}>\r\n                <div className={styles.links}>\r\n                  <IfFeature name=\"show_whats_new_link\">\r\n                    <a href=\"/whats-new\">\r\n                      <FormattedMessage id=\"home.whats_new_link\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_source_link\">\r\n                    <a href=\"https://github.com/mozilla/hubs\" rel=\"noreferrer noopener\">\r\n                      <FormattedMessage id=\"home.source_link\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_community_link\">\r\n                    <a href={configs.link(\"community\", \"https://discord.gg/wHmY4nd\")} rel=\"noreferrer noopener\">\r\n                      <FormattedMessage id=\"home.community_link\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"enable_spoke\">\r\n                    <a href=\"/spoke\" rel=\"noreferrer noopener\">\r\n                      <FormattedMessage id=\"editor-name\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_cloud\">\r\n                    <a href=\"https://hubs.mozilla.com/cloud\" rel=\"noreferrer noopener\">\r\n                      <FormattedMessage id=\"home.cloud_link\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  {this.props.showAdmin && (\r\n                    <a href=\"/admin\" rel=\"noreferrer noopener\">\r\n                      <i>\r\n                        <FontAwesomeIcon icon={faCog} />\r\n                      </i>\r\n                      &nbsp;\r\n                      <FormattedMessage id=\"home.admin\" />\r\n                    </a>\r\n                  )}\r\n                </div>\r\n              </div>\r\n              <div className={styles.signIn}>\r\n                {this.state.signedIn ? (\r\n                  <div>\r\n                    <span>\r\n                      <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.state.email)}\r\n                    </span>{\" \"}\r\n                    <a onClick={this.onLinkClicked(this.signOut)}>\r\n                      <FormattedMessage id=\"sign-in.out\" />\r\n                    </a>\r\n                  </div>\r\n                ) : (\r\n                  <a onClick={this.onLinkClicked(this.showSignInDialog)}>\r\n                    <FormattedMessage id=\"sign-in.in\" />\r\n                  </a>\r\n                )}\r\n              </div>\r\n            </div>\r\n            <div className={styles.heroContent} style={{ backgroundImage: configs.image(\"home_background\", true) }}>\r\n              {!this.props.hideHero &&\r\n                (this.props.featuredRooms && this.props.featuredRooms.length > 0\r\n                  ? this.renderFeaturedRoomsHero()\r\n                  : this.renderNonFeaturedRoomsHero())}\r\n              {!this.props.hideHero && (\r\n                <div className={classNames(styles.heroPanel, styles.rightPanel)}>\r\n                  {showFTUEVideo && (\r\n                    <div className={styles.heroVideo}>\r\n                      <video playsInline muted loop autoPlay>\r\n                        <source src={homeVideoWebM} type=\"video/webm\" />\r\n                        <source src={homeVideoMp4} type=\"video/mp4\" />\r\n                      </video>\r\n                    </div>\r\n                  )}\r\n                  <div>\r\n                    <div className={styles.secondaryLink}>\r\n                      <a href=\"/link\">\r\n                        <FormattedMessage id=\"home.have_code\" />\r\n                      </a>\r\n                    </div>\r\n\r\n                    <IfFeature name=\"show_discord_bot_link\">\r\n                      <div className={styles.secondaryLink}>\r\n                        <div>\r\n                          <FormattedMessage id=\"home.add_to_discord_1\" />\r\n                        </div>\r\n                        <img src={discordLogoSmall} />\r\n                        <a href=\"/discord\">\r\n                          <FormattedMessage id=\"home.add_to_discord_2\" />\r\n                        </a>\r\n                        <div>\r\n                          <FormattedMessage id=\"home.add_to_discord_3\" />\r\n                        </div>\r\n                      </div>\r\n                    </IfFeature>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className={styles.footerContent}>\r\n              <div className={styles.poweredBy}>\r\n                <UnlessFeature name=\"hide_powered_by\">\r\n                  <span className={styles.prefix}>\r\n                    <FormattedMessage id=\"home.powered_by_prefix\" />\r\n                  </span>\r\n                  <a className={styles.link} href=\"https://hubs.mozilla.com/cloud\">\r\n                    <FormattedMessage id=\"home.powered_by_link\" />\r\n                  </a>\r\n                </UnlessFeature>\r\n              </div>\r\n              <div className={styles.links}>\r\n                <div className={styles.top}>\r\n                  <IfFeature name=\"show_join_us_dialog\">\r\n                    <a className={styles.link} rel=\"noopener noreferrer\" href=\"/#/join-us\">\r\n                      <FormattedMessage id=\"home.join_us\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_issue_report_link\">\r\n                    {configs.feature(\"show_issue_report_dialog\") ? (\r\n                      <a className={styles.link} rel=\"noopener noreferrer\" href=\"/#/report\">\r\n                        <FormattedMessage id=\"home.report_issue\" />\r\n                      </a>\r\n                    ) : (\r\n                      <a\r\n                        className={styles.link}\r\n                        href={configs.link(\"issue_report\", \"/#/report\")}\r\n                        target=\"_blank\"\r\n                        rel=\"noreferrer noopener\"\r\n                      >\r\n                        <FormattedMessage id=\"settings.report\" />\r\n                      </a>\r\n                    )}\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_terms\">\r\n                    <a\r\n                      className={styles.link}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\r\n                    >\r\n                      <FormattedMessage id=\"home.terms_of_use\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_privacy\">\r\n                    <a\r\n                      className={styles.link}\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\r\n                    >\r\n                      <FormattedMessage id=\"home.privacy_notice\" />\r\n                    </a>\r\n                  </IfFeature>\r\n                  <IfFeature name=\"show_company_logo\">\r\n                    <img className={styles.companyLogo} src={configs.image(\"company_logo\")} />\r\n                  </IfFeature>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n          {this.state.dialog}\r\n        </div>\r\n      </IntlProvider>\r\n    );\r\n  }\r\n\r\n  renderPwaButton() {\r\n    return (\r\n      <button\r\n        className={classNames(styles.secondaryButton)}\r\n        style={this.props.installEvent || this.state.installed ? {} : { visibility: \"hidden\" }}\r\n        onClick={() => {\r\n          this.props.installEvent.prompt();\r\n\r\n          this.props.installEvent.userChoice.then(choiceResult => {\r\n            if (choiceResult.outcome === \"accepted\") {\r\n              this.setState({ installed: true });\r\n            }\r\n          });\r\n        }}\r\n      >\r\n        <i>\r\n          <FontAwesomeIcon icon={faPlus} />\r\n        </i>\r\n        <FormattedMessage id={`home.${isMobile ? \"mobile\" : \"desktop\"}.add_pwa`} />\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderCreateButton() {\r\n    return (\r\n      <button\r\n        className={classNames(styles.primaryButton, styles.ctaButton)}\r\n        onClick={e => {\r\n          e.preventDefault();\r\n          createAndRedirectToNewHub(null, null, false);\r\n        }}\r\n      >\r\n        <FormattedMessage id=\"home.create_a_room\" />\r\n      </button>\r\n    );\r\n  }\r\n\r\n  renderFeaturedRoomsHero() {\r\n    return [\r\n      <div className={styles.heroPanel} key={1}>\r\n        <div className={styles.container}>\r\n          <div className={classNames([styles.logo, styles.logoMargin])}>\r\n            <img src={configs.image(\"logo\")} />\r\n          </div>\r\n        </div>\r\n        <div className={styles.ctaButtons}>\r\n          {this.props.showCreate && this.renderCreateButton()}\r\n          {this.renderPwaButton()}\r\n        </div>\r\n      </div>,\r\n      <div className={styles.heroPanel} key={2}>\r\n        <div className={classNames([mediaBrowserStyles.mediaBrowser, mediaBrowserStyles.mediaBrowserInline])}>\r\n          <div className={classNames([mediaBrowserStyles.box, mediaBrowserStyles.darkened])}>\r\n            <MediaTiles\r\n              entries={this.props.featuredRooms}\r\n              handleEntryInfoClicked={this.showRoomInfo}\r\n              urlSource=\"favorites\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    ];\r\n  }\r\n\r\n  renderNonFeaturedRoomsHero() {\r\n    return (\r\n      <div className={styles.heroPanel}>\r\n        <div className={styles.container}>\r\n          <div className={styles.logo}>\r\n            <img src={configs.image(\"logo\")} />\r\n          </div>\r\n          <div className={styles.blurb}>\r\n            <FormattedMessage id=\"app-description\" />\r\n          </div>\r\n        </div>\r\n        <div className={styles.ctaButtons}>\r\n          {this.props.showCreate && this.renderCreateButton()}\r\n          {this.renderPwaButton()}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default HomeRoot;\r\n","export function playVideoWithStopOnBlur(videoEl) {\r\n  function toggleVideo() {\r\n    // Play the video if the window/tab is visible.\r\n    if (document.hasFocus()) {\r\n      videoEl.play();\r\n    } else {\r\n      videoEl.pause();\r\n    }\r\n  }\r\n  if (\"hasFocus\" in document) {\r\n    document.addEventListener(\"visibilitychange\", toggleVideo);\r\n    window.addEventListener(\"focus\", toggleVideo);\r\n    window.addEventListener(\"blur\", toggleVideo);\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DialogContainer from \"./dialog-container.js\";\r\n\r\nexport default class JoinUsDialog extends Component {\r\n  render() {\r\n    return (\r\n      <DialogContainer title=\"Join Us\" {...this.props}>\r\n        <span>\r\n          <p>\r\n            Join us in the{\" \"}\r\n            <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              Hubs community\r\n            </a>{\" \"}\r\n            on Discord.\r\n            <br />\r\n          </p>\r\n          <p>VR meetups every Friday at noon PDT!</p>\r\n          <p>\r\n            You can also follow us on Twitter at{\" \"}\r\n            <a href=\"https://twitter.com/mozillareality\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n              @mozillareality\r\n            </a>.\r\n          </p>\r\n        </span>\r\n      </DialogContainer>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport DialogContainer from \"./dialog-container.js\";\r\nimport { WithHoverSound } from \"./wrap-with-audio\";\r\n\r\nexport default class ReportDialog extends Component {\r\n  render() {\r\n    return (\r\n      <DialogContainer title=\"Report an Issue\" {...this.props}>\r\n        <span>\r\n          <p>Need to report a problem?</p>\r\n          <p>\r\n            You can file a{\" \"}\r\n            <WithHoverSound>\r\n              <a href=\"https://github.com/mozilla/hubs/issues\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                GitHub Issue\r\n              </a>\r\n            </WithHoverSound>{\" \"}\r\n            or e-mail us for support at{\" \"}\r\n            <WithHoverSound>\r\n              <a href=\"mailto:hubs@mozilla.com\">hubs@mozilla.com</a>\r\n            </WithHoverSound>\r\n          </p>\r\n          <p>\r\n            You can also find us on{\" \"}\r\n            <WithHoverSound>\r\n              <a href=\"https://discord.gg/wHmY4nd\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n                Discord\r\n              </a>\r\n            </WithHoverSound>\r\n          </p>\r\n        </span>\r\n      </DialogContainer>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport { HashRouter, Route } from \"react-router-dom\";\r\n\r\nimport \"./assets/stylesheets/index.scss\";\r\nimport registerTelemetry from \"./telemetry\";\r\nimport HomeRoot from \"./react-components/home-root\";\r\nimport AuthChannel from \"./utils/auth-channel\";\r\nimport { createAndRedirectToNewHub, connectToReticulum, fetchReticulumAuthenticated } from \"./utils/phoenix-utils\";\r\nimport Store from \"./storage/store\";\r\nimport JoinUsDialog from \"./react-components/join-us-dialog\";\r\nimport ReportDialog from \"./react-components/report-dialog\";\r\nimport jwtDecode from \"jwt-decode\";\r\nimport \"./utils/theme\";\r\nimport configs from \"./utils/configs\";\r\n\r\nconst qs = new URLSearchParams(location.search);\r\nregisterTelemetry(\"/home\", \"Hubs Home Page\");\r\n\r\nconst store = new Store();\r\nwindow.APP = { store };\r\n\r\nconst authChannel = new AuthChannel(store);\r\nlet installEvent = null;\r\nlet featuredRooms = null;\r\nlet mountedUI = false;\r\nlet hideHero = true;\r\nlet showAdmin = false;\r\nlet showCreate = false;\r\n\r\nconst remountUI = function() {\r\n  mountedUI = true;\r\n\r\n  const root = (\r\n    <HomeRoot\r\n      store={store}\r\n      authChannel={authChannel}\r\n      authVerify={qs.has(\"auth_topic\")}\r\n      authTopic={qs.get(\"auth_topic\")}\r\n      authToken={qs.get(\"auth_token\")}\r\n      authPayload={qs.get(\"auth_payload\")}\r\n      authOrigin={qs.get(\"auth_origin\")}\r\n      showSignIn={qs.has(\"sign_in\")}\r\n      signInDestination={qs.get(\"sign_in_destination\")}\r\n      signInDestinationUrl={qs.get(\"sign_in_destination_url\")}\r\n      signInReason={qs.get(\"sign_in_reason\")}\r\n      hideHero={hideHero}\r\n      showAdmin={showAdmin}\r\n      showCreate={showCreate}\r\n      featuredRooms={featuredRooms}\r\n      installEvent={installEvent}\r\n    />\r\n  );\r\n\r\n  function returnToRoot() {\r\n    location.href = \"/#/\";\r\n  }\r\n\r\n  const router = (\r\n    <HashRouter>\r\n      <>\r\n        {root}\r\n        <Route path=\"/join-us\" render={() => <JoinUsDialog onClose={returnToRoot} />} />\r\n        <Route path=\"/report\" render={() => <ReportDialog onClose={returnToRoot} />} />\r\n      </>\r\n    </HashRouter>\r\n  );\r\n\r\n  ReactDOM.render(router, document.getElementById(\"home-root\"));\r\n};\r\n\r\n// PWA install prompt\r\nwindow.addEventListener(\"beforeinstallprompt\", e => {\r\n  e.preventDefault();\r\n  installEvent = e;\r\n\r\n  if (mountedUI) {\r\n    remountUI();\r\n  }\r\n});\r\n\r\n// Fetch favorite + public rooms and merge, sorting by member count\r\nasync function fetchFeaturedRooms() {\r\n  const [favoriteRoomsResult, publicRoomsResult] = await Promise.all([\r\n    authChannel.signedIn\r\n      ? fetchReticulumAuthenticated(\r\n          `/api/v1/media/search?source=favorites&type=rooms&user=${store.credentialsAccountId}`\r\n        )\r\n      : Promise.resolve({ entries: [] }),\r\n    fetchReticulumAuthenticated(\"/api/v1/media/search?source=rooms&filter=public\")\r\n  ]);\r\n\r\n  const entries = [...publicRoomsResult.entries, ...favoriteRoomsResult.entries];\r\n  const ids = entries.map(h => h.id);\r\n  featuredRooms = entries.filter((h, i) => ids.lastIndexOf(h.id) === i).sort((a, b) => b.member_count - a.member_count);\r\n  remountUI();\r\n}\r\n\r\n(async () => {\r\n  if (qs.get(\"new\") !== null) {\r\n    createAndRedirectToNewHub(null, null, true);\r\n    return;\r\n  }\r\n\r\n  const socket = await connectToReticulum();\r\n\r\n  authChannel.setSocket(socket);\r\n  const joinParams = { hub_id: \"index\" };\r\n\r\n  if (store.state.credentials && store.state.credentials.token) {\r\n    joinParams.token = store.state.credentials.token;\r\n  }\r\n\r\n  const retPhxChannel = socket.channel(\"ret\", joinParams);\r\n  retPhxChannel.join().receive(\"ok\", () => {\r\n    retPhxChannel.push(\"refresh_perms_token\").receive(\"ok\", ({ perms_token }) => {\r\n      const perms = jwtDecode(perms_token);\r\n      configs.setIsAdmin(perms.postgrest_role === \"ret_admin\");\r\n\r\n      if (perms.postgrest_role === \"ret_admin\") {\r\n        showAdmin = true;\r\n      }\r\n\r\n      showCreate = !!perms.create_hub;\r\n      remountUI();\r\n\r\n      retPhxChannel.leave();\r\n    });\r\n  });\r\n\r\n  hideHero = false;\r\n  remountUI();\r\n\r\n  fetchFeaturedRooms();\r\n})();\r\n","export const waitForEvent = function(eventName, eventObj) {\r\n  return new Promise(resolve => {\r\n    eventObj.addEventListener(eventName, resolve, { once: true });\r\n  });\r\n};\r\n\r\nexport const waitForDOMContentLoaded = function() {\r\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\r\n    return Promise.resolve(null);\r\n  } else {\r\n    return waitForEvent(\"DOMContentLoaded\", window);\r\n  }\r\n};\r\n","import configs from \"./configs\";\r\nimport localeData from \"../assets/translations.data.json\";\r\n\r\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\r\n  .toLowerCase()\r\n  .split(/[_-]+/)[0];\r\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\r\n\r\nconst _messages = localeData[lang] || localeData.en;\r\n\r\nif (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[lang]) {\r\n  const configTranslations = configs.APP_CONFIG.translations[lang];\r\n  for (const messageKey in configTranslations) {\r\n    if (!configTranslations.hasOwnProperty(messageKey)) continue;\r\n    if (!configTranslations[messageKey]) continue;\r\n    _messages[messageKey] = configTranslations[messageKey];\r\n  }\r\n}\r\n\r\nexport const messages = Object.entries(_messages)\r\n  .map(([key, message]) => [\r\n    key,\r\n    // Replace nested message keys (e.g. %app-name%) with their messages.\r\n    message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _messages[subkey])\r\n  ])\r\n  .reduce((acc, entry) => {\r\n    acc[entry[0]] = entry[1];\r\n    return acc;\r\n  }, {});\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { FormattedMessage } from \"react-intl\";\r\n\r\nimport configs from \"../utils/configs\";\r\nimport IfFeature from \"./if-feature\";\r\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\r\nimport DialogContainer from \"./dialog-container\";\r\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\r\n\r\nexport default class SignInDialog extends Component {\r\n  static propTypes = {\r\n    authStarted: PropTypes.bool,\r\n    authComplete: PropTypes.bool,\r\n    onSignIn: PropTypes.func,\r\n    onContinue: PropTypes.func,\r\n    message: PropTypes.string,\r\n    continueText: PropTypes.string,\r\n    closable: PropTypes.bool\r\n  };\r\n\r\n  static defaultProps = {\r\n    closable: true\r\n  };\r\n\r\n  state = {\r\n    email: \"\"\r\n  };\r\n\r\n  onSubmit = e => {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    this.props.onSignIn(this.state.email);\r\n  };\r\n\r\n  render() {\r\n    let contents;\r\n    if (this.props.authStarted) {\r\n      contents = (\r\n        <p>\r\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\r\n        </p>\r\n      );\r\n    } else if (this.props.authComplete) {\r\n      contents = (\r\n        <div className={styles.signInComplete}>\r\n          <p>{this.props.message}</p>\r\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\r\n            {this.props.continueText}\r\n          </button>\r\n        </div>\r\n      );\r\n    } else {\r\n      contents = (\r\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\r\n          <span>{this.props.message}</span>\r\n          <input\r\n            name=\"email\"\r\n            type=\"email\"\r\n            required\r\n            placeholder=\"Your email address\"\r\n            value={this.state.email}\r\n            onFocus={e => handleTextFieldFocus(e.target)}\r\n            onBlur={() => handleTextFieldBlur()}\r\n            onChange={e => this.setState({ email: e.target.value })}\r\n            className={styles.emailField}\r\n          />\r\n          {(configs.feature(\"show_terms\") || configs.feature(\"show_privacy\")) && (\r\n            <p className={styles.terms}>\r\n              By proceeding, you agree to the{\" \"}\r\n              <IfFeature name=\"show_terms\">\r\n                <a\r\n                  rel=\"noopener noreferrer\"\r\n                  target=\"_blank\"\r\n                  href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\r\n                >\r\n                  terms of use\r\n                </a>{\" \"}\r\n              </IfFeature>\r\n              {configs.feature(\"show_terms\") && configs.feature(\"show_privacy\") && \"and \"}\r\n              <IfFeature name=\"show_privacy\">\r\n                <a\r\n                  rel=\"noopener noreferrer\"\r\n                  target=\"_blank\"\r\n                  href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\r\n                >\r\n                  privacy notice\r\n                </a>\r\n              </IfFeature>.\r\n            </p>\r\n          )}\r\n          <button type=\"submit\" className={styles.nextButton}>\r\n            next\r\n          </button>\r\n        </form>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <DialogContainer title=\"Sign In\" {...this.props}>\r\n        {contents}\r\n      </DialogContainer>\r\n    );\r\n  }\r\n}\r\n","import { isLocalHubsSceneUrl, proxiedUrlFor } from \"../utils/media-url-utils\";\r\n\r\nexport async function isValidGLB(url) {\r\n  return fetch(url).then(async r => {\r\n    const reader = r.body.getReader();\r\n    let header = \"\";\r\n    function readChunk({ done, value }) {\r\n      header += String.fromCharCode.apply(null, value.slice(0, 4));\r\n      if (!done && header.length < 4) {\r\n        return reader.read().then(readChunk);\r\n      } else {\r\n        reader.cancel();\r\n      }\r\n    }\r\n    await reader.read().then(readChunk);\r\n    return header.startsWith(\"glTF\");\r\n  });\r\n}\r\n\r\nexport async function isValidSceneUrl(url) {\r\n  if (url.trim() === \"\") return false;\r\n  if (!url.startsWith(\"http\")) return false;\r\n  if (await isLocalHubsSceneUrl(url)) {\r\n    return true;\r\n  } else {\r\n    return isValidGLB(proxiedUrlFor(url));\r\n  }\r\n}\r\n\r\n// To assist with content control, we avoid displaying scene links to users who are not the scene\r\n// creator, unless the scene is remixable or promotable.\r\nexport function allowDisplayOfSceneLink(scene, store) {\r\n  return (\r\n    (store.credentialsAccountId && scene.account_id === store.credentialsAccountId) ||\r\n    scene.allow_promotion ||\r\n    scene.allow_remixing\r\n  );\r\n}\r\n","// Utilities for manipulating state history. This provides a number of functions which\r\n// need to be used to manipulate history state so we can deal with edge cases around\r\n// entry back button and refreshes once entered.\r\n//\r\n// These functions also transparently deal with the room slug, so incoming calls can ignore\r\n// dealing with it, and provides APIs for getting the non-slug part of the path.\r\n//\r\n// The slug cannot be part of the basename for history, because the slug changes intra-session\r\n// if the room is renamed.\r\n\r\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\r\n// keys, or clears state if k if null.\r\n//\r\n// Also maintains a length key that can be used to find the length of the history chain\r\n// (across refreshes) for the current room.\r\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\r\n  let state = {};\r\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\r\n\r\n  if (k || newPathname || newSearch) {\r\n    state = history.location.state ? { ...history.location.state } : {};\r\n    delete state.__duplicate;\r\n\r\n    if (k) {\r\n      state[k] = v;\r\n      state.key = k;\r\n      state.value = v;\r\n      state.detail = detail;\r\n    }\r\n  }\r\n\r\n  const pathname =\r\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\r\n\r\n  const search = newSearch !== undefined ? newSearch : history.location.search;\r\n\r\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\r\n  // at the top of the history stack (which was needed to wipe out forward history)\r\n  // so we use this opportunity to replace it.\r\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\r\n  const method = replace || isDuplicate ? history.replace : history.push;\r\n  state.__historyLength = newLength;\r\n\r\n  method({ pathname, search, state });\r\n}\r\n\r\nexport function pushHistoryState(history, k, v, detail) {\r\n  pushOrUpdateHistory(history, false, k, v, detail);\r\n}\r\n\r\nexport function replaceHistoryState(history, k, v, detail) {\r\n  pushOrUpdateHistory(history, true, k, v, detail);\r\n}\r\n\r\nexport function pushHistoryPath(history, path, search) {\r\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\r\n}\r\n\r\nexport function clearHistoryState(history) {\r\n  pushOrUpdateHistory(history, false);\r\n}\r\n\r\n// This will pop the browser history to the first entry that was for this hubs room,\r\n// and then push a duplicate entry onto the history stack in order to wipe out forward\r\n// history.\r\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\r\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\r\n\r\n  const len = history.location.state.__historyLength;\r\n  if (len === 0) return;\r\n\r\n  return new Promise(resolve => {\r\n    // After the go() completes, we push a duplicate history entry onto the stack\r\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\r\n    // to go back to the prior page.\r\n    const unsubscribe = history.listen(() => {\r\n      unsubscribe();\r\n      history.push({\r\n        pathname: history.location.pathname,\r\n        search: history.location.search,\r\n        state: { __historyLength: 0, __duplicate: true }\r\n      });\r\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\r\n      resolve();\r\n    });\r\n\r\n    history.go(-len);\r\n  });\r\n}\r\n\r\n// This will pop the browser history to the entry before the first entry for this hubs room.\r\nexport function navigateToPriorPage(history) {\r\n  popToBeginningOfHubHistory(history, true);\r\n}\r\n\r\n// Returns the part of the pathname that does not include the slug\r\nexport function sluglessPath(location) {\r\n  const parts = location.pathname.split(\"/\");\r\n  return `/${parts.slice(2).join(\"/\")}`;\r\n}\r\n\r\n// Returns a new path that includes the current slug as a prefix to the\r\n// provided path.\r\nexport function withSlug(location, path) {\r\n  const parts = location.pathname.split(\"/\");\r\n  return `/${parts[1]}${path}`;\r\n}\r\n","import configs from \"../utils/configs\";\r\n\r\nexport default function IfFeature(props) {\r\n  return (configs.feature(props.name) && props.children) || null;\r\n}\r\n","import configs from \"../utils/configs\";\r\n\r\nexport default function UnlessFeature(props) {\r\n  return (!configs.feature(props.name) && props.children) || null;\r\n}\r\n","import uuid from \"uuid/v4\";\r\n\r\nexport default class AuthChannel {\r\n  constructor(store) {\r\n    this.store = store;\r\n    this.socket = null;\r\n    this._signedIn = !!this.store.state.credentials.token;\r\n  }\r\n\r\n  setSocket = socket => {\r\n    this.socket = socket;\r\n  };\r\n\r\n  get email() {\r\n    return this.store.state.credentials.email;\r\n  }\r\n\r\n  get signedIn() {\r\n    return this._signedIn;\r\n  }\r\n\r\n  signOut = async hubChannel => {\r\n    if (hubChannel) {\r\n      await hubChannel.signOut();\r\n    }\r\n    this.store.update({ credentials: { token: null, email: null } });\r\n    await this.store.resetToRandomDefaultAvatar();\r\n    this._signedIn = false;\r\n  };\r\n\r\n  verifyAuthentication(authTopic, authToken, authPayload) {\r\n    const channel = this.socket.channel(authTopic);\r\n    return new Promise((resolve, reject) => {\r\n      channel.onError(() => {\r\n        channel.leave();\r\n        reject();\r\n      });\r\n\r\n      channel\r\n        .join()\r\n        .receive(\"ok\", () => {\r\n          channel.on(\"auth_credentials\", async ({ credentials: token, payload: payload }) => {\r\n            await this.handleAuthCredentials(payload.email, token);\r\n            resolve();\r\n          });\r\n\r\n          channel.push(\"auth_verified\", { token: authToken, payload: authPayload });\r\n        })\r\n        .receive(\"error\", reject);\r\n    });\r\n  }\r\n\r\n  async startAuthentication(email, hubChannel) {\r\n    const channel = this.socket.channel(`auth:${uuid()}`);\r\n    await new Promise((resolve, reject) =>\r\n      channel\r\n        .join()\r\n        .receive(\"ok\", resolve)\r\n        .receive(\"error\", reject)\r\n    );\r\n\r\n    const authComplete = new Promise(resolve =>\r\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\r\n        await this.handleAuthCredentials(email, token, hubChannel);\r\n        resolve();\r\n      })\r\n    );\r\n\r\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\r\n\r\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\r\n    // for authComplete.\r\n    return { authComplete };\r\n  }\r\n\r\n  async handleAuthCredentials(email, token, hubChannel) {\r\n    this.store.update({ credentials: { email, token } });\r\n\r\n    if (hubChannel) {\r\n      await hubChannel.signIn(token);\r\n    }\r\n\r\n    this._signedIn = true;\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\n\r\nexport default class DialogContainer extends Component {\r\n  static propTypes = {\r\n    title: PropTypes.node,\r\n    children: PropTypes.node.isRequired,\r\n    onClose: PropTypes.func,\r\n    closable: PropTypes.bool,\r\n    wide: PropTypes.bool,\r\n    noOverlay: PropTypes.bool,\r\n    className: PropTypes.string,\r\n    allowOverflow: PropTypes.bool,\r\n    additionalClass: PropTypes.string\r\n  };\r\n\r\n  static defaultProps = {\r\n    closable: true\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.onKeyDown = this.onKeyDown.bind(this);\r\n    this.onContainerClicked = this.onContainerClicked.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener(\"keydown\", this.onKeyDown);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener(\"keydown\", this.onKeyDown);\r\n  }\r\n\r\n  onKeyDown(e) {\r\n    if (this.props.closable && e.key === \"Escape\") {\r\n      this.props.onClose();\r\n    }\r\n  }\r\n\r\n  onContainerClicked = e => {\r\n    if (this.props.closable && e.currentTarget === e.target) {\r\n      this.props.onClose();\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className={classNames(\r\n          \"dialog-overlay\",\r\n          this.props.noOverlay ? \"dialog-overlay__no-pointer-events\" : \"\",\r\n          this.props.className\r\n        )}\r\n      >\r\n        <div\r\n          className={classNames(\r\n            \"dialog\",\r\n            this.props.noOverlay ? \"dialog__no-pointer-events\" : \"dialog__dark-background\",\r\n            this.props.noOverlay ? \"dialog__align-end\" : \"\"\r\n          )}\r\n          onClick={this.onContainerClicked}\r\n        >\r\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\r\n            <div\r\n              className={classNames(\r\n                \"dialog__box__contents\",\r\n                this.props.allowOverflow ? \"dialog__box__contents-overflow\" : null,\r\n                this.props.additionalClass\r\n              )}\r\n            >\r\n              {this.props.closable &&\r\n                this.props.onClose &&\r\n                !this.props.noOverlay && (\r\n                  <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\r\n                    <i>\r\n                      <FontAwesomeIcon icon={faTimes} />\r\n                    </i>\r\n                  </button>\r\n                )}\r\n              {this.props.title && <div className=\"dialog__box__contents__title\">{this.props.title}</div>}\r\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\r\n              <div className=\"dialog__box__contents__button-container\" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport PropTypes from \"prop-types\";\r\n\r\nexport const ReactAudioContext = React.createContext({});\r\n\r\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\r\n\r\nexport const WithHoverSound = ({ sound, children }) => {\r\n  return (\r\n    <ReactAudioContext.Consumer>\r\n      {context => {\r\n        return React.cloneElement(children, {\r\n          onMouseEnter: e => {\r\n            if (context && context.playSound) {\r\n              context.playSound(sound || hudHoverSound);\r\n            }\r\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\r\n          }\r\n        });\r\n      }}\r\n    </ReactAudioContext.Consumer>\r\n  );\r\n};\r\n\r\nWithHoverSound.propTypes = {\r\n  children: PropTypes.object,\r\n  sound: PropTypes.string\r\n};\r\n","export default function maskEmail(email) {\r\n  if (!email) return \"\";\r\n  const emailParts = email.split(\"@\");\r\n  const emailIdentity = emailParts[0];\r\n  const emailDomain = emailParts[1];\r\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\r\n  return `${truncatedIdentity}...@${emailDomain}`;\r\n}\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport { injectIntl, FormattedMessage } from \"react-intl\";\r\n\r\nimport DialogContainer from \"./dialog-container.js\";\r\nimport styles from \"../assets/stylesheets/room-info-dialog.scss\";\r\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\r\nimport { allowDisplayOfSceneLink } from \"../utils/scene-url-utils\";\r\n\r\nclass RoomInfoDialog extends Component {\r\n  static propTypes = {\r\n    hubName: PropTypes.string,\r\n    hubDescription: PropTypes.string,\r\n    scene: PropTypes.object,\r\n    store: PropTypes.object\r\n  };\r\n\r\n  render() {\r\n    const hasDescription = !!this.props.hubDescription;\r\n    const hasScene = !!this.props.scene;\r\n\r\n    const showSceneLink = hasScene && allowDisplayOfSceneLink(this.props.scene, this.props.store);\r\n\r\n    const toAttributionDiv = (a, i) => {\r\n      if (a.url) {\r\n        const source = a.url.includes(\"sketchfab.com\")\r\n          ? \"on Sketchfab\"\r\n          : a.url.includes(\"poly.google.com\")\r\n            ? \"on Google Poly\"\r\n            : \"\";\r\n\r\n        return (\r\n          <div className={styles.attribution} key={`${a.url} ${i}`}>\r\n            <div className={styles.attributionName}>\r\n              <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                {a.name}\r\n              </a>\r\n            </div>\r\n            <div className={styles.attributionAuthor}>\r\n              by {a.author} {source}\r\n            </div>\r\n          </div>\r\n        );\r\n      } else {\r\n        return (\r\n          <div className={styles.attribution} key={`${a.name} ${a.author} {i}`}>\r\n            <div className={styles.attributionName}>{a.name}</div>\r\n            <div className={styles.attributionAuthor}>by {a.author}</div>\r\n          </div>\r\n        );\r\n      }\r\n    };\r\n\r\n    let attributions = null;\r\n    let creator = null;\r\n\r\n    if (hasScene && this.props.scene.attributions) {\r\n      creator = this.props.scene.attributions.creator;\r\n      attributions = (\r\n        <div>\r\n          {this.props.scene.attributions.content && this.props.scene.attributions.content.map(toAttributionDiv)}\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const title = (\r\n      <div className={styles.title}>\r\n        {hasDescription && hasScene ? <FormattedMessage id=\"room-info.title\" /> : this.props.hubName}\r\n      </div>\r\n    );\r\n\r\n    return (\r\n      <DialogContainer title={title} wide={true} {...this.props}>\r\n        {hasDescription && (\r\n          <>\r\n            {hasScene && <div className={styles.hubTitle}>{this.props.hubName}</div>}\r\n            <div className={styles.description}>{this.props.hubDescription}</div>\r\n          </>\r\n        )}\r\n        {hasScene && (\r\n          <>\r\n            <div className={styles.subtitle}>\r\n              <FormattedMessage id=\"room-info.scene-info\" />\r\n            </div>\r\n            <div className={styles.roomInfo}>\r\n              <div className={styles.sceneScreenshot}>\r\n                {showSceneLink ? (\r\n                  <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                    <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\r\n                  </a>\r\n                ) : (\r\n                  <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\r\n                )}\r\n              </div>\r\n              <div className={styles.sceneDetails}>\r\n                <div className={styles.sceneMain}>\r\n                  <div className={styles.sceneName}>\r\n                    {showSceneLink ? (\r\n                      <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                        {this.props.scene.name}\r\n                      </a>\r\n                    ) : (\r\n                      <span>{this.props.scene.name}</span>\r\n                    )}\r\n                  </div>\r\n                  <div className={styles.sceneCreator}>{creator}</div>\r\n                </div>\r\n                <div className={styles.sceneAttributions}>{attributions}</div>\r\n                <div className={styles.sceneButtons}> </div>\r\n              </div>\r\n            </div>\r\n          </>\r\n        )}\r\n      </DialogContainer>\r\n    );\r\n  }\r\n}\r\nexport default injectIntl(RoomInfoDialog);\r\n","import React, { Component } from \"react\";\r\nimport PropTypes from \"prop-types\";\r\nimport classNames from \"classnames\";\r\nimport dayjs from \"dayjs-ext\";\r\nimport relativeTime from \"dayjs-ext/plugin/relativeTime\";\r\nimport { injectIntl, FormattedMessage } from \"react-intl\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport { faAngleLeft } from \"@fortawesome/free-solid-svg-icons/faAngleLeft\";\r\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\r\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons/faExternalLinkAlt\";\r\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\r\nimport { faInfo } from \"@fortawesome/free-solid-svg-icons/faInfo\";\r\nimport { faClone } from \"@fortawesome/free-solid-svg-icons/faClone\";\r\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\r\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\r\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\r\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\r\n\r\nimport IfFeature from \"./if-feature\";\r\nimport styles from \"../assets/stylesheets/media-browser.scss\";\r\nimport { proxiedUrlFor, scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\r\nimport StateLink from \"./state-link\";\r\nimport { remixAvatar } from \"../utils/avatar-utils\";\r\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\r\nimport { getReticulumFetchUrl } from \"../utils/phoenix-utils\";\r\n\r\ndayjs.extend(relativeTime);\r\n\r\nconst PUBLISHER_FOR_ENTRY_TYPE = {\r\n  sketchfab_model: \"Sketchfab\",\r\n  poly_model: \"Google Poly\",\r\n  twitch_stream: \"Twitch\"\r\n};\r\n\r\nclass MediaTiles extends Component {\r\n  static propTypes = {\r\n    intl: PropTypes.object,\r\n    entries: PropTypes.array,\r\n    hasNext: PropTypes.bool,\r\n    hasPrevious: PropTypes.bool,\r\n    isVariableWidth: PropTypes.bool,\r\n    page: PropTypes.number,\r\n    history: PropTypes.object,\r\n    urlSource: PropTypes.string,\r\n    handleEntryClicked: PropTypes.func,\r\n    handleEntryInfoClicked: PropTypes.func,\r\n    handlePager: PropTypes.func,\r\n    onCopyAvatar: PropTypes.func,\r\n    onCopyScene: PropTypes.func,\r\n    onShowSimilar: PropTypes.func\r\n  };\r\n\r\n  handleCopyAvatar = async (e, entry) => {\r\n    e.preventDefault();\r\n    await remixAvatar(entry.id, entry.name);\r\n    this.props.onCopyAvatar();\r\n  };\r\n\r\n  handleCopyScene = async (e, entry) => {\r\n    e.preventDefault();\r\n    await fetchReticulumAuthenticated(\"/api/v1/scenes\", \"POST\", {\r\n      parent_scene_id: entry.id\r\n    });\r\n    this.props.onCopyScene();\r\n  };\r\n\r\n  render() {\r\n    const { urlSource, hasNext, hasPrevious, page, isVariableWidth } = this.props;\r\n    const entries = this.props.entries || [];\r\n    const [createTileWidth, createTileHeight] = this.getTileDimensions(false, urlSource === \"avatars\");\r\n\r\n    return (\r\n      <div className={styles.body}>\r\n        <div className={classNames({ [styles.tiles]: true, [styles.tilesVariable]: isVariableWidth })}>\r\n          {(urlSource === \"avatars\" || urlSource === \"scenes\") && (\r\n            <div\r\n              style={{ width: `${createTileWidth}px`, height: `${createTileHeight}px` }}\r\n              className={classNames({\r\n                [styles.tile]: true,\r\n                [styles.createTile]: true,\r\n                [styles.createAvatarTile]: urlSource === \"avatars\"\r\n              })}\r\n            >\r\n              {urlSource === \"scenes\" ? (\r\n                <IfFeature name=\"enable_spoke\">\r\n                  <a href=\"/spoke/new\" rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tileLink}>\r\n                    <div className={styles.tileContent}>\r\n                      <FontAwesomeIcon icon={faPlus} />\r\n                      <FormattedMessage id=\"media-browser.create-scene\" />\r\n                    </div>\r\n                  </a>\r\n                </IfFeature>\r\n              ) : (\r\n                <a\r\n                  onClick={e => {\r\n                    e.preventDefault();\r\n                    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\r\n                  }}\r\n                  className={styles.tileLink}\r\n                >\r\n                  <div className={styles.tileContent}>\r\n                    <FontAwesomeIcon icon={faPlus} />\r\n                    <FormattedMessage id=\"media-browser.create-avatar\" />\r\n                  </div>\r\n                </a>\r\n              )}\r\n            </div>\r\n          )}\r\n\r\n          {entries.map(this.entryToTile)}\r\n        </div>\r\n\r\n        {(hasNext || hasPrevious) &&\r\n          this.props.handlePager && (\r\n            <div className={styles.pager}>\r\n              <a\r\n                className={classNames({ [styles.previousPage]: true, [styles.pagerButtonDisabled]: !hasPrevious })}\r\n                onClick={() => this.props.handlePager(-1)}\r\n              >\r\n                <FontAwesomeIcon icon={faAngleLeft} />\r\n              </a>\r\n              <div className={styles.pageNumber}>{page}</div>\r\n              <a\r\n                className={classNames({ [styles.nextPage]: true, [styles.pagerButtonDisabled]: !hasNext })}\r\n                onClick={() => this.props.handlePager(1)}\r\n              >\r\n                <FontAwesomeIcon icon={faAngleRight} />\r\n              </a>\r\n            </div>\r\n          )}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getTileDimensions = (isImage, isAvatar, imageAspect) => {\r\n    // Doing breakpointing here, so we can have proper image placeholder based upon dynamic aspect ratio\r\n    const clientWidth = window.innerWidth;\r\n    let imageHeight = clientWidth < 1079 ? (clientWidth < 768 ? (clientWidth < 400 ? 85 : 100) : 150) : 200;\r\n    if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\r\n\r\n    // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\r\n    let imageWidth;\r\n    if (isImage) {\r\n      imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\r\n    } else if (isAvatar) {\r\n      imageWidth = Math.floor((9 / 16) * imageHeight);\r\n    } else {\r\n      imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\r\n    }\r\n\r\n    return [imageWidth, imageHeight];\r\n  };\r\n\r\n  entryToTile = (entry, idx) => {\r\n    const imageSrc = entry.images.preview.url;\r\n    const creator = entry.attributions && entry.attributions.creator;\r\n    const isImage = entry.type.endsWith(\"_image\");\r\n    const isAvatar = [\"avatar\", \"avatar_listing\"].includes(entry.type);\r\n    const isHub = [\"room\"].includes(entry.type);\r\n    const imageAspect = entry.images.preview.width / entry.images.preview.height;\r\n\r\n    const [imageWidth, imageHeight] = this.getTileDimensions(isImage, isAvatar, imageAspect);\r\n\r\n    // Inline mp4s directly since far/nearspark cannot resize them.\r\n    const thumbnailElement =\r\n      entry.images.preview.type === \"mp4\" ? (\r\n        <video\r\n          className={classNames(styles.tileContent, styles.avatarTile)}\r\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\r\n          muted\r\n          autoPlay\r\n          playsInline\r\n          loop\r\n          src={proxiedUrlFor(imageSrc)}\r\n        />\r\n      ) : (\r\n        <img\r\n          className={classNames(styles.tileContent, styles.avatarTile)}\r\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\r\n          src={scaledThumbnailUrlFor(imageSrc, imageWidth, imageHeight)}\r\n        />\r\n      );\r\n\r\n    const publisherName =\r\n      (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\r\n      PUBLISHER_FOR_ENTRY_TYPE[entry.type];\r\n\r\n    const { formatMessage } = this.props.intl;\r\n\r\n    return (\r\n      <div style={{ width: `${imageWidth}px` }} className={styles.tile} key={`${entry.id}_${idx}`}>\r\n        <a\r\n          href={entry.url}\r\n          rel=\"noreferrer noopener\"\r\n          onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\r\n          className={styles.tileLink}\r\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\r\n        >\r\n          {thumbnailElement}\r\n        </a>\r\n        <div className={styles.tileActions}>\r\n          {entry.type === \"avatar\" && (\r\n            <StateLink\r\n              stateKey=\"overlay\"\r\n              stateValue=\"avatar-editor\"\r\n              stateDetail={{ avatarId: entry.id }}\r\n              history={this.props.history}\r\n              title=\"Edit\"\r\n            >\r\n              <FontAwesomeIcon icon={faPencilAlt} />\r\n            </StateLink>\r\n          )}\r\n          {entry.type === \"avatar_listing\" && (\r\n            <a\r\n              onClick={e => {\r\n                e.preventDefault();\r\n                this.props.onShowSimilar(entry.id, entry.name);\r\n              }}\r\n              title=\"Show Similar\"\r\n            >\r\n              <FontAwesomeIcon icon={faSearch} />\r\n            </a>\r\n          )}\r\n          {entry.type === \"avatar_listing\" &&\r\n            entry.allow_remixing && (\r\n              <a onClick={e => this.handleCopyAvatar(e, entry)} title=\"Copy to my avatars\">\r\n                <FontAwesomeIcon icon={faClone} />\r\n              </a>\r\n            )}\r\n          {entry.type === \"scene_listing\" &&\r\n            entry.allow_remixing && (\r\n              <a onClick={e => this.handleCopyScene(e, entry)} title=\"Copy to my scenes\">\r\n                <FontAwesomeIcon icon={faClone} />\r\n              </a>\r\n            )}\r\n          {entry.type === \"scene\" &&\r\n            entry.project_id && (\r\n              <a\r\n                target=\"_blank\"\r\n                rel=\"noopener noreferrer\"\r\n                href={getReticulumFetchUrl(`/spoke/projects/${entry.project_id}`)}\r\n                title={formatMessage({ id: \"scene.edit_button\" })}\r\n              >\r\n                <FontAwesomeIcon icon={faPencilAlt} />\r\n              </a>\r\n            )}\r\n          {entry.type === \"room\" &&\r\n            this.props.handleEntryInfoClicked &&\r\n            entry.description && (\r\n              <a\r\n                title=\"room info\"\r\n                onClick={e => {\r\n                  e.preventDefault();\r\n                  this.props.handleEntryInfoClicked(entry);\r\n                }}\r\n              >\r\n                <FontAwesomeIcon icon={faInfo} />\r\n              </a>\r\n            )}\r\n        </div>\r\n\r\n        {entry.favorited && (\r\n          <div className={styles.favorite}>\r\n            <FontAwesomeIcon icon={faStar} />\r\n          </div>\r\n        )}\r\n\r\n        {!entry.type.endsWith(\"_image\") && (\r\n          <div className={styles.info}>\r\n            <a\r\n              href={entry.url}\r\n              rel=\"noreferrer noopener\"\r\n              className={styles.name}\r\n              onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\r\n            >\r\n              {entry.name || \"\\u00A0\"}\r\n            </a>\r\n            {!isAvatar &&\r\n              !isHub && (\r\n                <div className={styles.attribution}>\r\n                  <div className={styles.creator}>\r\n                    {creator && creator.name === undefined && <span>{creator}</span>}\r\n                    {creator && creator.name && !creator.url && <span>{creator.name}</span>}\r\n                    {creator &&\r\n                      creator.name &&\r\n                      creator.url && (\r\n                        <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                          {creator.name}\r\n                        </a>\r\n                      )}\r\n                  </div>\r\n                  {publisherName && (\r\n                    <div className={styles.publisher}>\r\n                      <i>\r\n                        <FontAwesomeIcon icon={faExternalLinkAlt} />\r\n                      </i>\r\n                      &nbsp;<a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\r\n                        {publisherName}\r\n                      </a>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            {isHub && (\r\n              <>\r\n                <div className={styles.attribution}>\r\n                  <div className={styles.lastJoined}>\r\n                    <FormattedMessage id=\"media-browser.hub.joined-prefix\" />\r\n                    {dayjs(entry.last_activated_at).fromNow()}\r\n                  </div>\r\n                </div>\r\n                <div className={styles.presence}>\r\n                  <FontAwesomeIcon icon={faUsers} />\r\n                  <span>{entry.member_count}</span>\r\n                </div>\r\n              </>\r\n            )}\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  };\r\n}\r\nexport default injectIntl(MediaTiles);\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hero-content\":\"index__hero-content__2z8Qm\",\"heroContent\":\"index__hero-content__2z8Qm\",\"cta-buttons\":\"index__cta-buttons__2Wi7A\",\"ctaButtons\":\"index__cta-buttons__2Wi7A\",\"primary-button\":\"index__primary-button__22mQJ\",\"primaryButton\":\"index__primary-button__22mQJ\",\"secondary-button\":\"index__secondary-button__2x3Yi\",\"secondaryButton\":\"index__secondary-button__2x3Yi\",\"loading-text\":\"index__loading-text__1S9o5\",\"loadingText\":\"index__loading-text__1S9o5\",\"home\":\"index__home__2JEiT\",\"main-content\":\"index__main-content__KEHrN\",\"mainContent\":\"index__main-content__KEHrN\",\"noninteractive\":\"index__noninteractive__3_-_X\",\"header-content\":\"index__header-content__3asMz\",\"headerContent\":\"index__header-content__3asMz\",\"title-and-nav\":\"index__title-and-nav__3JVXN\",\"titleAndNav\":\"index__title-and-nav__3JVXN\",\"links\":\"index__links__FuhJV\",\"sign-in\":\"index__sign-in__2Qzyi\",\"signIn\":\"index__sign-in__2Qzyi\",\"video-container\":\"index__video-container__1O_F2\",\"videoContainer\":\"index__video-container__1O_F2\",\"background-video\":\"index__background-video__YGmLv\",\"backgroundVideo\":\"index__background-video__YGmLv\",\"container\":\"index__container__1IoTY\",\"logo\":\"index__logo__73DDw\",\"logo-margin\":\"index__logo-margin__Hj1un\",\"logoMargin\":\"index__logo-margin__Hj1un\",\"blurb\":\"index__blurb__1135a\",\"hero-panel\":\"index__hero-panel__DuSxj\",\"heroPanel\":\"index__hero-panel__DuSxj\",\"cta-button\":\"index__cta-button__In75L\",\"ctaButton\":\"index__cta-button__In75L\",\"rightPanel\":\"index__rightPanel__1IPgu\",\"hero-video\":\"index__hero-video__23aEB\",\"heroVideo\":\"index__hero-video__23aEB\",\"have-code\":\"index__have-code__bBGO9\",\"haveCode\":\"index__have-code__bBGO9\",\"secondary-link\":\"index__secondary-link__ZSI2D\",\"secondaryLink\":\"index__secondary-link__ZSI2D\",\"footer-content\":\"index__footer-content__3RuIM\",\"footerContent\":\"index__footer-content__3RuIM\",\"powered-by\":\"index__powered-by__bau9U\",\"poweredBy\":\"index__powered-by__bau9U\",\"prefix\":\"index__prefix___2oLK\",\"link\":\"index__link__Gi6M6\",\"company-logo\":\"index__company-logo__2cr_S\",\"companyLogo\":\"index__company-logo__2cr_S\",\"top\":\"index__top__1SbYx\",\"bottom\":\"index__bottom__23drL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"room-info-dialog__title__Q-4Cv\",\"room-info\":\"room-info-dialog__room-info__11DPZ\",\"roomInfo\":\"room-info-dialog__room-info__11DPZ\",\"scene-screenshot\":\"room-info-dialog__scene-screenshot__qBYcV\",\"sceneScreenshot\":\"room-info-dialog__scene-screenshot__qBYcV\",\"scene-details\":\"room-info-dialog__scene-details__1iqpD\",\"sceneDetails\":\"room-info-dialog__scene-details__1iqpD\",\"scene-main\":\"room-info-dialog__scene-main__Ut61u\",\"sceneMain\":\"room-info-dialog__scene-main__Ut61u\",\"scene-name\":\"room-info-dialog__scene-name__2_zua\",\"sceneName\":\"room-info-dialog__scene-name__2_zua\",\"scene-creator\":\"room-info-dialog__scene-creator__3FlPc\",\"sceneCreator\":\"room-info-dialog__scene-creator__3FlPc\",\"scene-attributions\":\"room-info-dialog__scene-attributions__wCin2\",\"sceneAttributions\":\"room-info-dialog__scene-attributions__wCin2\",\"attribution\":\"room-info-dialog__attribution__B4omT\",\"attribution-name\":\"room-info-dialog__attribution-name__259N9\",\"attributionName\":\"room-info-dialog__attribution-name__259N9\",\"attribution-author\":\"room-info-dialog__attribution-author__3zmlb\",\"attributionAuthor\":\"room-info-dialog__attribution-author__3zmlb\",\"description\":\"room-info-dialog__description__1tl3L\",\"subtitle\":\"room-info-dialog__subtitle__17wES\",\"hub-title\":\"room-info-dialog__hub-title__1EIq-\",\"hubTitle\":\"room-info-dialog__hub-title__1EIq-\"};","import screenfull from \"screenfull\";\r\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\r\nconst { detect } = require(\"detect-browser\");\r\n\r\nconst browser = detect();\r\nlet isExitingFullscreenDueToFocus = false;\r\n\r\n// Utility function that handles a bunch of incidental stuff related to text fields:\r\n//\r\n// - On non-mobile platforms, selects the value on focus\r\n// - If full screen, exits/enters full screen because of firefox full screen issues\r\nexport function handleTextFieldFocus(target) {\r\n  if (!window.AFRAME) return;\r\n  const isMobile = AFRAME.utils.device.isMobile();\r\n\r\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\r\n    // This will prevent focus, but its the only way to avoid getting into a\r\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\r\n    // twice to ultimately get the focus.\r\n    //\r\n    // We need to keep track of a bit here so that we don't re-full screen when\r\n    // the text box is blurred by the browser.\r\n\r\n    isExitingFullscreenDueToFocus = true;\r\n    screenfull.exit().then(() => {\r\n      target.focus();\r\n    });\r\n  }\r\n\r\n  if (!isMobile) target.select();\r\n}\r\n\r\nexport function handleTextFieldBlur() {\r\n  // This is the incidental blur event when exiting fullscreen mode on mobile\r\n  if (isExitingFullscreenDueToFocus) {\r\n    isExitingFullscreenDueToFocus = false;\r\n    return;\r\n  }\r\n\r\n  showFullScreenIfWasFullScreen();\r\n}\r\n","import appLogo from \"../assets/images/app-logo.png\";\r\nimport companyLogo from \"../assets/images/company-logo.png\";\r\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\r\nimport pdfjs from \"pdfjs-dist\";\r\n\r\n// Read configs from global variable if available, otherwise use the process.env injected from build.\r\nconst configs = {};\r\nlet isAdmin = false;\r\n\r\n[\r\n  \"RETICULUM_SERVER\",\r\n  \"THUMBNAIL_SERVER\",\r\n  \"CORS_PROXY_SERVER\",\r\n  \"NON_CORS_PROXY_DOMAINS\",\r\n  \"SENTRY_DSN\",\r\n  \"GA_TRACKING_ID\",\r\n  \"SHORTLINK_DOMAIN\",\r\n  \"BASE_ASSETS_PATH\"\r\n].forEach(x => {\r\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\r\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\r\n\r\n  if (x === \"BASE_ASSETS_PATH\" && configs[x]) {\r\n    // eslint-disable-next-line no-undef\r\n    __webpack_public_path__ = configs[x];\r\n\r\n    // Using external CDN to reduce build size\r\n    pdfjs.GlobalWorkerOptions.workerSrc = `${configs[x]}../assets/js/pdfjs-dist@2.1.266/build/pdf.worker.js`;\r\n  }\r\n});\r\n\r\n// Also include configs that reticulum injects as a script in the page head.\r\n\r\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\r\n\r\nif (window.APP_CONFIG) {\r\n  configs.APP_CONFIG = window.APP_CONFIG;\r\n  const { theme } = configs.APP_CONFIG;\r\n  if (theme) {\r\n    const colorVars = [];\r\n    for (const key in theme) {\r\n      if (!theme.hasOwnProperty(key)) continue;\r\n      colorVars.push(`--${key}: ${theme[key]};`);\r\n    }\r\n    const style = document.createElement(\"style\");\r\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\r\n    document.head.prepend(style);\r\n  }\r\n\r\n  if (!configs.APP_CONFIG.features) {\r\n    configs.APP_CONFIG.features = {};\r\n  }\r\n} else {\r\n  configs.APP_CONFIG = {\r\n    features: {}\r\n  };\r\n}\r\n\r\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\r\n\r\nconfigs.feature = featureName => {\r\n  const value = configs.APP_CONFIG.features[featureName];\r\n  if (typeof value === \"boolean\" || featureName === \"enable_spoke\") {\r\n    const enableAll = isLocalDevelopment && !process.env.USE_FEATURE_CONFIG;\r\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\r\n    return forceEnableSpoke || enableAll || value;\r\n  } else {\r\n    return value;\r\n  }\r\n};\r\n\r\nlet localDevImages = {};\r\nif (isLocalDevelopment) {\r\n  localDevImages = {\r\n    logo: appLogo,\r\n    company_logo: companyLogo,\r\n    editor_logo: sceneEditorLogo\r\n  };\r\n}\r\n\r\nconfigs.image = (imageName, cssUrl) => {\r\n  const url =\r\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\r\n    localDevImages[imageName];\r\n  return url && cssUrl ? `url(${url})` : url;\r\n};\r\n\r\nconfigs.link = (linkName, defaultValue) => {\r\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\r\n};\r\n\r\nconfigs.setIsAdmin = _isAdmin => {\r\n  isAdmin = _isAdmin;\r\n};\r\nconfigs.isAdmin = () => isAdmin;\r\n\r\nexport default configs;\r\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\r\nimport { proxiedUrlFor } from \"./media-url-utils\";\r\n\r\nconst AVATARS_API = \"/api/v1/avatars\";\r\n\r\nexport const AVATAR_TYPES = {\r\n  SKINNABLE: \"skinnable\",\r\n  URL: \"url\"\r\n};\r\n\r\nexport function getAvatarType(avatarId) {\r\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\r\n  return AVATAR_TYPES.SKINNABLE;\r\n}\r\n\r\nasync function fetchSkinnableAvatar(avatarId) {\r\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\r\n  return resp && resp.avatars && resp.avatars[0];\r\n}\r\n\r\nexport async function fetchAvatar(avatarId) {\r\n  switch (getAvatarType(avatarId)) {\r\n    case AVATAR_TYPES.SKINNABLE:\r\n      return fetchSkinnableAvatar(avatarId);\r\n    case AVATAR_TYPES.URL:\r\n      return {\r\n        avatar_id: avatarId,\r\n        gltf_url: proxiedUrlFor(avatarId)\r\n      };\r\n  }\r\n}\r\n\r\nasync function fetchAvatarGltfUrl(avatarId) {\r\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\r\n}\r\n\r\nexport function getAvatarSrc(avatarId) {\r\n  switch (getAvatarType(avatarId)) {\r\n    case AVATAR_TYPES.SKINNABLE:\r\n      return fetchAvatarGltfUrl(avatarId);\r\n    case AVATAR_TYPES.URL:\r\n      return proxiedUrlFor(avatarId);\r\n    default:\r\n      return avatarId;\r\n  }\r\n}\r\n\r\nexport async function getAvatarThumbnailUrl(avatarId) {\r\n  switch (getAvatarType(avatarId)) {\r\n    case AVATAR_TYPES.SKINNABLE:\r\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\r\n    default:\r\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\r\n  }\r\n}\r\n\r\n// Currently the way we do material overrides is with a special named material.\r\n// We want to migrate eventually to having a GLTF extension that specifies what\r\n// materials can be overridden, but in the meantime we want to be able to support\r\n// arbitrary models with some sort of functionality. This provides a fallback\r\nexport const MAT_NAME = \"Bot_PBS\";\r\nexport function ensureAvatarMaterial(gltf) {\r\n  if (gltf.materials.find(m => m.name === MAT_NAME)) return gltf;\r\n\r\n  function materialForMesh(mesh) {\r\n    if (!mesh.primitives) return;\r\n    const primitive = mesh.primitives.find(p => p.material !== undefined);\r\n    return primitive && gltf.materials[primitive.material];\r\n  }\r\n\r\n  let nodes = gltf.scenes[gltf.scene].nodes.slice(0);\r\n  while (nodes.length) {\r\n    const node = gltf.nodes[nodes.shift()];\r\n    const material = node.mesh !== undefined && materialForMesh(gltf.meshes[node.mesh]);\r\n    if (material) {\r\n      material.name = MAT_NAME;\r\n      break;\r\n    }\r\n    if (node.children) nodes = nodes.concat(node.children);\r\n  }\r\n\r\n  return gltf;\r\n}\r\n\r\nexport async function remixAvatar(parentId, name) {\r\n  const avatar = {\r\n    parent_avatar_listing_id: parentId,\r\n    name: name,\r\n    files: {}\r\n  };\r\n\r\n  return fetchReticulumAuthenticated(AVATARS_API, \"POST\", { avatar });\r\n}\r\n","module.exports = __webpack_public_path__ + \"assets/video/home-aee18c619a9005bd4b0d31295670af80.webm\";","module.exports = __webpack_public_path__ + \"assets/video/home-5af051d2c531928dbaaf51b9badaabde.mp4\";","module.exports = __webpack_public_path__ + \"assets/images/discord-logo-small-2c21aeda16de354ba5334551a883b481.png\";","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\r\nimport ducky from \"../assets/models/DuckyMesh.glb\";\r\n\r\nconst names = [\r\n  \"Baers-Pochard\",\r\n  \"Baikal-Teal\",\r\n  \"Barrows-Goldeneye\",\r\n  \"Blue-Billed\",\r\n  \"Blue-Duck\",\r\n  \"Blue-Winged\",\r\n  \"Brown-Teal\",\r\n  \"Bufflehead\",\r\n  \"Canvasback\",\r\n  \"Cape-Shoveler\",\r\n  \"Chestnut-Teal\",\r\n  \"Chiloe-Wigeon\",\r\n  \"Cinnamon-Teal\",\r\n  \"Comb-Duck\",\r\n  \"Common-Eider\",\r\n  \"Common-Goldeneye\",\r\n  \"Common-Merganser\",\r\n  \"Common-Pochard\",\r\n  \"Common-Scoter\",\r\n  \"Common-Shelduck\",\r\n  \"Cotton-Pygmy\",\r\n  \"Crested-Duck\",\r\n  \"Crested-Shelduck\",\r\n  \"Eatons-Pintail\",\r\n  \"Falcated\",\r\n  \"Ferruginous\",\r\n  \"Freckled-Duck\",\r\n  \"Gadwall\",\r\n  \"Garganey\",\r\n  \"Greater-Scaup\",\r\n  \"Green-Pygmy\",\r\n  \"Grey-Teal\",\r\n  \"Hardhead\",\r\n  \"Harlequin\",\r\n  \"Hartlaubs\",\r\n  \"Hooded-Merganser\",\r\n  \"Hottentot-Teal\",\r\n  \"Kelp-Goose\",\r\n  \"King-Eider\",\r\n  \"Lake-Duck\",\r\n  \"Laysan-Duck\",\r\n  \"Lesser-Scaup\",\r\n  \"Long-Tailed\",\r\n  \"Maccoa-Duck\",\r\n  \"Mallard\",\r\n  \"Mandarin\",\r\n  \"Marbled-Teal\",\r\n  \"Mellers-Duck\",\r\n  \"Merganser\",\r\n  \"Northern-Pintail\",\r\n  \"Orinoco-Goose\",\r\n  \"Paradise-Shelduck\",\r\n  \"Plumed-Whistler\",\r\n  \"Puna-Teal\",\r\n  \"Pygmy-Goose\",\r\n  \"Radjah-Shelduck\",\r\n  \"Red-Billed\",\r\n  \"Red-Crested\",\r\n  \"Red-Shoveler\",\r\n  \"Ring-Necked\",\r\n  \"Ringed-Teal\",\r\n  \"Rosy-Billed\",\r\n  \"Ruddy-Shelduck\",\r\n  \"Salvadoris-Teal\",\r\n  \"Scaly-Sided\",\r\n  \"Shelduck\",\r\n  \"Shoveler\",\r\n  \"Silver-Teal\",\r\n  \"Smew\",\r\n  \"Spectacled-Eider\",\r\n  \"Spot-Billed\",\r\n  \"Spotted-Whistler\",\r\n  \"Steamerduck\",\r\n  \"Stellers-Eider\",\r\n  \"Sunda-Teal\",\r\n  \"Surf-Scoter\",\r\n  \"Tufted-Duck\",\r\n  \"Velvet-Scoter\",\r\n  \"Wandering-Whistler\",\r\n  \"Whistling-duck\",\r\n  \"White-Backed\",\r\n  \"White-Cheeked\",\r\n  \"White-Winged\",\r\n  \"Wigeon\",\r\n  \"Wood-Duck\",\r\n  \"Yellow-Billed\"\r\n];\r\n\r\nfunction chooseRandom(arr) {\r\n  return arr[Math.floor(Math.random() * arr.length)];\r\n}\r\n\r\nexport function generateRandomName() {\r\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\r\n}\r\n\r\nexport async function fetchRandomDefaultAvatarId() {\r\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\r\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries;\r\n  if (defaultAvatars.length === 0) {\r\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\r\n    // when running against a fresh reticulum server, e.g. a local ret instance.\r\n    return new URL(ducky, location.href).href;\r\n  }\r\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\r\n  return chooseRandom(avatarIds);\r\n}\r\n","import { Validator } from \"jsonschema\";\r\nimport merge from \"deepmerge\";\r\nimport Cookies from \"js-cookie\";\r\nimport jwtDecode from \"jwt-decode\";\r\n\r\nconst LOCAL_STORE_KEY = \"___hubs_store\";\r\nconst STORE_STATE_CACHE_KEY = Symbol();\r\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\r\nconst validator = new Validator();\r\nimport { EventTarget } from \"event-target-shim\";\r\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\r\n\r\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\r\n// (Think flux but with way less incidental complexity, at least for now :))\r\nexport const SCHEMA = {\r\n  id: \"/HubsStore\",\r\n\r\n  definitions: {\r\n    profile: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9 -]{3,32}$\" },\r\n        avatarId: { type: \"string\" },\r\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\r\n        personalAvatarId: { type: \"string\" }\r\n      }\r\n    },\r\n\r\n    credentials: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        token: { type: [\"null\", \"string\"] },\r\n        email: { type: [\"null\", \"string\"] }\r\n      }\r\n    },\r\n\r\n    activity: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        hasFoundFreeze: { type: \"boolean\" },\r\n        hasChangedName: { type: \"boolean\" },\r\n        hasAcceptedProfile: { type: \"boolean\" },\r\n        lastEnteredAt: { type: \"string\" },\r\n        hasPinned: { type: \"boolean\" },\r\n        hasRotated: { type: \"boolean\" },\r\n        hasRecentered: { type: \"boolean\" },\r\n        hasScaled: { type: \"boolean\" },\r\n        hasHoveredInWorldHud: { type: \"boolean\" },\r\n        hasOpenedShare: { type: \"boolean\" },\r\n        entryCount: { type: \"number\" }\r\n      }\r\n    },\r\n\r\n    settings: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        lastUsedMicDeviceId: { type: \"string\" }\r\n      }\r\n    },\r\n\r\n    preferences: {\r\n      type: \"object\",\r\n      additionalProperties: false,\r\n      properties: {\r\n        muteMicOnEntry: { type: \"bool\" },\r\n        enableOnScreenJoystickLeft: { type: \"bool\" },\r\n        enableOnScreenJoystickRight: { type: \"bool\" },\r\n        onlyShowNametagsInFreeze: { type: \"bool\" },\r\n        allowMultipleHubsInstances: { type: \"bool\" },\r\n        maxResolutionWidth: { type: \"number\" },\r\n        maxResolutionHeight: { type: \"number\" },\r\n        globalVoiceVolume: { type: \"number\" },\r\n        globalMediaVolume: { type: \"number\" },\r\n        snapRotationDegrees: { type: \"number\" },\r\n        materialQualitySetting: { type: \"string\" },\r\n        disableMovement: { type: \"bool\" },\r\n        disableBackwardsMovement: { type: \"bool\" },\r\n        disableStrafing: { type: \"bool\" },\r\n        disableTeleporter: { type: \"bool\" },\r\n        disableAutoPixelRatio: { type: \"bool\" }\r\n      }\r\n    },\r\n\r\n    // Legacy\r\n    confirmedDiscordRooms: {\r\n      type: \"array\",\r\n      items: { type: \"string\" }\r\n    },\r\n\r\n    confirmedBroadcastedRooms: {\r\n      type: \"array\",\r\n      items: { type: \"string\" }\r\n    },\r\n\r\n    uploadPromotionTokens: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          fileId: { type: \"string\" },\r\n          promotionToken: { type: \"string\" }\r\n        }\r\n      }\r\n    },\r\n\r\n    creatorAssignmentTokens: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          hubId: { type: \"string\" },\r\n          creatorAssignmentToken: { type: \"string\" }\r\n        }\r\n      }\r\n    },\r\n\r\n    embedTokens: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          hubId: { type: \"string\" },\r\n          embedToken: { type: \"string\" }\r\n        }\r\n      }\r\n    },\r\n\r\n    onLoadActions: {\r\n      type: \"array\",\r\n      items: {\r\n        type: \"object\",\r\n        additionalProperties: false,\r\n        properties: {\r\n          action: { type: \"string\" },\r\n          args: { type: \"object\" }\r\n        }\r\n      }\r\n    }\r\n  },\r\n\r\n  type: \"object\",\r\n\r\n  properties: {\r\n    profile: { $ref: \"#/definitions/profile\" },\r\n    credentials: { $ref: \"#/definitions/credentials\" },\r\n    activity: { $ref: \"#/definitions/activity\" },\r\n    settings: { $ref: \"#/definitions/settings\" },\r\n    preferences: { $ref: \"#/definitions/preferences\" },\r\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\r\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\r\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\r\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\r\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\r\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\r\n  },\r\n\r\n  additionalProperties: false\r\n};\r\n\r\nexport default class Store extends EventTarget {\r\n  constructor() {\r\n    super();\r\n\r\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\r\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\r\n    }\r\n\r\n    // When storage is updated in another window\r\n    window.addEventListener(\"storage\", e => {\r\n      if (e.key !== LOCAL_STORE_KEY) return;\r\n      delete this[STORE_STATE_CACHE_KEY];\r\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\r\n    });\r\n\r\n    this.update({\r\n      activity: {},\r\n      settings: {},\r\n      credentials: {},\r\n      profile: {},\r\n      confirmedDiscordRooms: [],\r\n      confirmedBroadcastedRooms: [],\r\n      uploadPromotionTokens: [],\r\n      creatorAssignmentTokens: [],\r\n      embedTokens: [],\r\n      onLoadActions: [],\r\n      preferences: {}\r\n    });\r\n\r\n    this._shouldResetAvatarOnInit = false;\r\n\r\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\r\n    if (oauthFlowCredentials) {\r\n      this.update({ credentials: oauthFlowCredentials });\r\n      this._shouldResetAvatarOnInit = true;\r\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\r\n    }\r\n\r\n    this._signOutOnExpiredAuthToken();\r\n  }\r\n\r\n  _signOutOnExpiredAuthToken = () => {\r\n    if (!this.state.credentials.token) return;\r\n\r\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\r\n    if (expiry <= Date.now()) {\r\n      this.update({ credentials: { token: null, email: null } });\r\n    }\r\n  };\r\n\r\n  initProfile = async () => {\r\n    if (this._shouldResetAvatarOnInit) {\r\n      await this.resetToRandomDefaultAvatar();\r\n    } else {\r\n      this.update({\r\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\r\n      });\r\n    }\r\n\r\n    // Regenerate name to encourage users to change it.\r\n    if (!this.state.activity.hasChangedName) {\r\n      this.update({ profile: { displayName: generateRandomName() } });\r\n    }\r\n  };\r\n\r\n  resetToRandomDefaultAvatar = async () => {\r\n    this.update({\r\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\r\n    });\r\n  };\r\n\r\n  get state() {\r\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\r\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\r\n    }\r\n\r\n    return this[STORE_STATE_CACHE_KEY];\r\n  }\r\n\r\n  get credentialsAccountId() {\r\n    if (this.state.credentials.token) {\r\n      return jwtDecode(this.state.credentials.token).sub;\r\n    } else {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  resetConfirmedBroadcastedRooms() {\r\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\r\n  }\r\n\r\n  resetTipActivityFlags() {\r\n    this.update({\r\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\r\n    });\r\n  }\r\n\r\n  bumpEntryCount() {\r\n    const currentEntryCount = this.state.activity.entryCount || 0;\r\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\r\n  }\r\n\r\n  // Sets a one-time action to perform the next time the page loads\r\n  enqueueOnLoadAction(action, args) {\r\n    this.update({ onLoadActions: [{ action, args }] });\r\n  }\r\n\r\n  executeOnLoadActions(sceneEl) {\r\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\r\n      const { action, args } = this.state.onLoadActions[i];\r\n\r\n      if (action === \"emit_scene_event\") {\r\n        sceneEl.emit(args.event, args.detail);\r\n      }\r\n    }\r\n\r\n    this.clearOnLoadActions();\r\n  }\r\n\r\n  clearOnLoadActions() {\r\n    this.clearStoredArray(\"onLoadActions\");\r\n  }\r\n\r\n  clearStoredArray(key) {\r\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\r\n    const update = {};\r\n    update[key] = [];\r\n\r\n    this.update(update, { arrayMerge: overwriteMerge });\r\n  }\r\n\r\n  update(newState, mergeOpts) {\r\n    const finalState = merge(this.state, newState, mergeOpts);\r\n    const { valid } = validator.validate(finalState, SCHEMA);\r\n\r\n    if (!valid) {\r\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\r\n      // sensitive data in the error message.\r\n      throw new Error(`Write to store failed schema validation.`);\r\n    }\r\n\r\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\r\n    delete this[STORE_STATE_CACHE_KEY];\r\n\r\n    if (newState.profile !== undefined) {\r\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\r\n    }\r\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\r\n\r\n    return finalState;\r\n  }\r\n}\r\n","module.exports = __webpack_public_path__ + \"assets/images/app-logo-157c06cff6c80227eb577f35c79e58b6.png\";","module.exports = __webpack_public_path__ + \"assets/images/company-logo-8f6f7c3b303004256295b45c2eee5117.png\";","module.exports = __webpack_public_path__ + \"assets/images/editor-logo-6f885a1543496ebc23a21b7fea82b255.png\";","import Raven from \"raven-js\";\r\nimport configs from \"./utils/configs\";\r\n\r\nconst ga = window.ga;\r\n\r\nexport default function registerTelemetry(trackedPage, trackedTitle) {\r\n  const sentryDsn = configs.SENTRY_DSN;\r\n  const gaTrackingId = configs.GA_TRACKING_ID;\r\n\r\n  if (sentryDsn) {\r\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\r\n    Raven.config(sentryDsn).install();\r\n  }\r\n\r\n  if (ga && gaTrackingId) {\r\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\r\n\r\n    ga(\"create\", gaTrackingId, \"auto\");\r\n\r\n    if (trackedPage) {\r\n      ga(\"set\", \"page\", trackedPage);\r\n    }\r\n\r\n    if (trackedTitle) {\r\n      ga(\"set\", \"title\", trackedTitle);\r\n    }\r\n\r\n    ga(\"send\", \"pageview\");\r\n  }\r\n}\r\n","const adjectives = [\r\n  \"able\",\r\n  \"absolute\",\r\n  \"acceptable\",\r\n  \"acclaimed\",\r\n  \"accomplished\",\r\n  \"accurate\",\r\n  \"aching\",\r\n  \"acrobatic\",\r\n  \"adorable\",\r\n  \"adventurous\",\r\n  \"basic\",\r\n  \"belated\",\r\n  \"beloved\",\r\n  \"calm\",\r\n  \"candid\",\r\n  \"capital\",\r\n  \"carefree\",\r\n  \"caring\",\r\n  \"cautious\",\r\n  \"celebrated\",\r\n  \"charming\",\r\n  \"daring\",\r\n  \"darling\",\r\n  \"dearest\",\r\n  \"each\",\r\n  \"eager\",\r\n  \"early\",\r\n  \"earnest\",\r\n  \"easy\",\r\n  \"easygoing\",\r\n  \"ecstatic\",\r\n  \"edible\",\r\n  \"fabulous\",\r\n  \"fair\",\r\n  \"faithful\",\r\n  \"familiar\",\r\n  \"famous\",\r\n  \"fancy\",\r\n  \"fantastic\",\r\n  \"far\",\r\n  \"generous\",\r\n  \"gentle\",\r\n  \"genuine\",\r\n  \"giant\",\r\n  \"handmade\",\r\n  \"handsome\",\r\n  \"handy\",\r\n  \"happy\",\r\n  \"icy\",\r\n  \"ideal\",\r\n  \"identical\",\r\n  \"keen\",\r\n  \"lasting\",\r\n  \"lavish\",\r\n  \"magnificent\",\r\n  \"majestic\",\r\n  \"mammoth\",\r\n  \"marvelous\",\r\n  \"natural\",\r\n  \"obedient\",\r\n  \"palatable\",\r\n  \"parched\",\r\n  \"passionate\",\r\n  \"pastel\",\r\n  \"peaceful\",\r\n  \"perfect\",\r\n  \"perfumed\",\r\n  \"quaint\",\r\n  \"qualified\",\r\n  \"radiant\",\r\n  \"rapid\",\r\n  \"rare\",\r\n  \"safe\",\r\n  \"sandy\",\r\n  \"satisfied\",\r\n  \"scaly\",\r\n  \"scarce\",\r\n  \"scared\",\r\n  \"scary\",\r\n  \"scented\",\r\n  \"scientific\",\r\n  \"secret\",\r\n  \"sentimental\",\r\n  \"talkative\",\r\n  \"tangible\",\r\n  \"tart\",\r\n  \"tasty\",\r\n  \"tattered\",\r\n  \"teeming\",\r\n  \"ultimate\",\r\n  \"uncommon\",\r\n  \"unconscious\",\r\n  \"understated\",\r\n  \"warm\",\r\n  \"active\",\r\n  \"adept\",\r\n  \"admirable\",\r\n  \"admired\",\r\n  \"adorable\",\r\n  \"adored\",\r\n  \"advanced\",\r\n  \"affectionate\",\r\n  \"beneficial\",\r\n  \"best\",\r\n  \"better\",\r\n  \"big\",\r\n  \"cheerful\",\r\n  \"cheery\",\r\n  \"chief\",\r\n  \"chilly\",\r\n  \"classic\",\r\n  \"clean\",\r\n  \"clear\",\r\n  \"clever\",\r\n  \"decent\",\r\n  \"decisive\",\r\n  \"deep\",\r\n  \"defiant\",\r\n  \"definitive\",\r\n  \"delectable\",\r\n  \"delicious\",\r\n  \"elaborate\",\r\n  \"elastic\",\r\n  \"elated\",\r\n  \"elegant\",\r\n  \"elementary\",\r\n  \"elliptical\",\r\n  \"fast\",\r\n  \"favorable\",\r\n  \"favorite\",\r\n  \"fearless\",\r\n  \"gifted\",\r\n  \"glamorous\",\r\n  \"gleaming\",\r\n  \"glittering\",\r\n  \"harmonious\",\r\n  \"imaginative\",\r\n  \"immense\",\r\n  \"jealous\",\r\n  \"kind\",\r\n  \"leafy\",\r\n  \"legal\",\r\n  \"mature\",\r\n  \"mean\",\r\n  \"nautical\",\r\n  \"neat\",\r\n  \"necessary\",\r\n  \"needy\",\r\n  \"oddball\",\r\n  \"offbeat\",\r\n  \"periodic\",\r\n  \"perky\",\r\n  \"personal\",\r\n  \"pertinent\",\r\n  \"petty\",\r\n  \"quarterly\",\r\n  \"ready\",\r\n  \"real\",\r\n  \"realistic\",\r\n  \"reasonable\",\r\n  \"regal\",\r\n  \"serene\",\r\n  \"shabby\",\r\n  \"sharp\",\r\n  \"shiny\",\r\n  \"showy\",\r\n  \"shy\",\r\n  \"silky\",\r\n  \"tempting\",\r\n  \"tense\",\r\n  \"terrific\",\r\n  \"testy\",\r\n  \"thankful\",\r\n  \"uniform\",\r\n  \"unique\",\r\n  \"vast\",\r\n  \"weary\",\r\n  \"wee\",\r\n  \"welcome\",\r\n  \"agile\",\r\n  \"alarmed\",\r\n  \"alert\",\r\n  \"alive\",\r\n  \"bleak\",\r\n  \"blissful\",\r\n  \"blushing\",\r\n  \"coarse\",\r\n  \"colorful\",\r\n  \"colossal\",\r\n  \"comfortable\",\r\n  \"compassionate\",\r\n  \"complete\",\r\n  \"delightful\",\r\n  \"dense\",\r\n  \"dependable\",\r\n  \"dependent\",\r\n  \"descriptive\",\r\n  \"detailed\",\r\n  \"determined\",\r\n  \"devoted\",\r\n  \"different\",\r\n  \"eminent\",\r\n  \"emotional\",\r\n  \"enchanted\",\r\n  \"enchanting\",\r\n  \"energetic\",\r\n  \"enormous\",\r\n  \"fine\",\r\n  \"finished\",\r\n  \"firm\",\r\n  \"firsthand\",\r\n  \"fixed\",\r\n  \"flashy\",\r\n  \"flawless\",\r\n  \"glorious\",\r\n  \"glossy\",\r\n  \"golden\",\r\n  \"good\",\r\n  \"gorgeous\",\r\n  \"graceful\",\r\n  \"healthy\",\r\n  \"heartfelt\",\r\n  \"hearty\",\r\n  \"helpful\",\r\n  \"impartial\",\r\n  \"impressive\",\r\n  \"jolly\",\r\n  \"jovial\",\r\n  \"lighthearted\",\r\n  \"likable\",\r\n  \"lined\",\r\n  \"mellow\",\r\n  \"melodic\",\r\n  \"memorable\",\r\n  \"mild\",\r\n  \"new\",\r\n  \"opulent\",\r\n  \"playful\",\r\n  \"pleasant\",\r\n  \"pleasing\",\r\n  \"plump\",\r\n  \"plush\",\r\n  \"polished\",\r\n  \"polite\",\r\n  \"reliable\",\r\n  \"relieved\",\r\n  \"remarkable\",\r\n  \"remote\",\r\n  \"respectful\",\r\n  \"responsible\",\r\n  \"simple\",\r\n  \"simplistic\",\r\n  \"sizzling\",\r\n  \"sleepy\",\r\n  \"slight\",\r\n  \"slim\",\r\n  \"smart\",\r\n  \"smooth\",\r\n  \"snappy\",\r\n  \"snoopy\",\r\n  \"thirsty\",\r\n  \"this\",\r\n  \"thorough\",\r\n  \"those\",\r\n  \"thoughtful\",\r\n  \"united\",\r\n  \"vibrant\",\r\n  \"vicious\",\r\n  \"wellmade\",\r\n  \"whimsical\",\r\n  \"whirlwind\",\r\n  \"zesty\",\r\n  \"amazing\",\r\n  \"ambitious\",\r\n  \"ample\",\r\n  \"amused\",\r\n  \"amusing\",\r\n  \"ancient\",\r\n  \"angelic\",\r\n  \"antique\",\r\n  \"bold\",\r\n  \"bossy\",\r\n  \"both\",\r\n  \"bouncy\",\r\n  \"bountiful\",\r\n  \"complex\",\r\n  \"conscious\",\r\n  \"considerate\",\r\n  \"constant\",\r\n  \"content\",\r\n  \"conventional\",\r\n  \"cooked\",\r\n  \"cool\",\r\n  \"cooperative\",\r\n  \"diligent\",\r\n  \"dimwitted\",\r\n  \"direct\",\r\n  \"discrete\",\r\n  \"envious\",\r\n  \"essential\",\r\n  \"ethical\",\r\n  \"euphoric\",\r\n  \"flippant\",\r\n  \"fluffy\",\r\n  \"flustered\",\r\n  \"focused\",\r\n  \"fond\",\r\n  \"gracious\",\r\n  \"grand\",\r\n  \"grandiose\",\r\n  \"granular\",\r\n  \"grateful\",\r\n  \"grave\",\r\n  \"great\",\r\n  \"hidden\",\r\n  \"high\",\r\n  \"hilarious\",\r\n  \"homely\",\r\n  \"incomparable\",\r\n  \"incredible\",\r\n  \"infamous\",\r\n  \"joyful\",\r\n  \"lively\",\r\n  \"loathsome\",\r\n  \"lonely\",\r\n  \"long\",\r\n  \"mindless\",\r\n  \"miniature\",\r\n  \"minor\",\r\n  \"misty\",\r\n  \"next\",\r\n  \"nice\",\r\n  \"nifty\",\r\n  \"nimble\",\r\n  \"orderly\",\r\n  \"organic\",\r\n  \"ornate\",\r\n  \"popular\",\r\n  \"posh\",\r\n  \"positive\",\r\n  \"potable\",\r\n  \"powerful\",\r\n  \"powerless\",\r\n  \"precious\",\r\n  \"present\",\r\n  \"prestigious\",\r\n  \"quick\",\r\n  \"rewarding\",\r\n  \"rich\",\r\n  \"right\",\r\n  \"sociable\",\r\n  \"soft\",\r\n  \"solid\",\r\n  \"some\",\r\n  \"sophisticated\",\r\n  \"soulful\",\r\n  \"sparkling\",\r\n  \"spectacular\",\r\n  \"speedy\",\r\n  \"spicy\",\r\n  \"spiffy\",\r\n  \"spirited\",\r\n  \"spiteful\",\r\n  \"splendid\",\r\n  \"spotless\",\r\n  \"spry\",\r\n  \"thrifty\",\r\n  \"tidy\",\r\n  \"tight\",\r\n  \"timely\",\r\n  \"tinted\",\r\n  \"unruly\",\r\n  \"untimely\",\r\n  \"violet\",\r\n  \"wicked\",\r\n  \"wide\",\r\n  \"wild\",\r\n  \"willing\",\r\n  \"winding\",\r\n  \"windy\",\r\n  \"zigzag\",\r\n  \"apprehensive\",\r\n  \"appropriate\",\r\n  \"artistic\",\r\n  \"assured\",\r\n  \"astonishing\",\r\n  \"bright\",\r\n  \"brilliant\",\r\n  \"bronze\",\r\n  \"coordinated\",\r\n  \"courageous\",\r\n  \"courteous\",\r\n  \"crafty\",\r\n  \"crazy\",\r\n  \"creamy\",\r\n  \"creative\",\r\n  \"crisp\",\r\n  \"distant\",\r\n  \"distinct\",\r\n  \"downright\",\r\n  \"evergreen\",\r\n  \"everlasting\",\r\n  \"every\",\r\n  \"evil\",\r\n  \"excellent\",\r\n  \"excitable\",\r\n  \"exemplary\",\r\n  \"exhausted\",\r\n  \"forthright\",\r\n  \"fortunate\",\r\n  \"fragrant\",\r\n  \"frank\",\r\n  \"free\",\r\n  \"frequent\",\r\n  \"fresh\",\r\n  \"friendly\",\r\n  \"frightened\",\r\n  \"frigid\",\r\n  \"gripping\",\r\n  \"grounded\",\r\n  \"honest\",\r\n  \"honorable\",\r\n  \"honored\",\r\n  \"hopeful\",\r\n  \"hospitable\",\r\n  \"hot\",\r\n  \"huge\",\r\n  \"infatuated\",\r\n  \"infinite\",\r\n  \"informal\",\r\n  \"insistent\",\r\n  \"instructive\",\r\n  \"juicy\",\r\n  \"jumbo\",\r\n  \"knowing\",\r\n  \"knowledgeable\",\r\n  \"longterm\",\r\n  \"loud\",\r\n  \"lovable\",\r\n  \"loving\",\r\n  \"modern\",\r\n  \"modest\",\r\n  \"monumental\",\r\n  \"normal\",\r\n  \"notable\",\r\n  \"outgoing\",\r\n  \"precious\",\r\n  \"pretty\",\r\n  \"prickly\",\r\n  \"primary\",\r\n  \"pristine\",\r\n  \"private\",\r\n  \"prize\",\r\n  \"productive\",\r\n  \"profitable\",\r\n  \"quiet\",\r\n  \"quintessential\",\r\n  \"roasted\",\r\n  \"robust\",\r\n  \"square\",\r\n  \"squiggly\",\r\n  \"stable\",\r\n  \"staid\",\r\n  \"starry\",\r\n  \"steel\",\r\n  \"stimulating\",\r\n  \"striking\",\r\n  \"striped\",\r\n  \"strong\",\r\n  \"studious\",\r\n  \"stunning\",\r\n  \"tough\",\r\n  \"trained\",\r\n  \"treasured\",\r\n  \"tremendous\",\r\n  \"triangular\",\r\n  \"tricky\",\r\n  \"unused\",\r\n  \"unusual\",\r\n  \"upbeat\",\r\n  \"virtual\",\r\n  \"witty\",\r\n  \"wonderful\",\r\n  \"wooden\",\r\n  \"worldly\",\r\n  \"youthful\",\r\n  \"attached\",\r\n  \"attentive\",\r\n  \"attractive\",\r\n  \"austere\",\r\n  \"authentic\",\r\n  \"automatic\",\r\n  \"aware\",\r\n  \"awesome\",\r\n  \"bubbly\",\r\n  \"bustling\",\r\n  \"busy\",\r\n  \"buttery\",\r\n  \"cuddly\",\r\n  \"cultured\",\r\n  \"curly\",\r\n  \"curvy\",\r\n  \"cute\",\r\n  \"cylindrical\",\r\n  \"downright\",\r\n  \"dramatic\",\r\n  \"excited\",\r\n  \"exciting\",\r\n  \"exotic\",\r\n  \"experienced\",\r\n  \"expert\",\r\n  \"frosty\",\r\n  \"fruitful\",\r\n  \"full\",\r\n  \"fumbling\",\r\n  \"funny\",\r\n  \"fussy\",\r\n  \"growing\",\r\n  \"grown\",\r\n  \"gummy\",\r\n  \"humble\",\r\n  \"humongous\",\r\n  \"hungry\",\r\n  \"intelligent\",\r\n  \"interesting\",\r\n  \"known\",\r\n  \"kooky\",\r\n  \"loyal\",\r\n  \"lucky\",\r\n  \"luminous\",\r\n  \"lustrous\",\r\n  \"luxurious\",\r\n  \"multicolored\",\r\n  \"mysterious\",\r\n  \"noteworthy\",\r\n  \"numb\",\r\n  \"nutritious\",\r\n  \"outstanding\",\r\n  \"overjoyed\",\r\n  \"proper\",\r\n  \"proud\",\r\n  \"prudent\",\r\n  \"punctual\",\r\n  \"puny\",\r\n  \"pure\",\r\n  \"puzzled\",\r\n  \"puzzling\",\r\n  \"quirky\",\r\n  \"stupendous\",\r\n  \"sturdy\",\r\n  \"stylish\",\r\n  \"subdued\",\r\n  \"subtle\",\r\n  \"sunny\",\r\n  \"super\",\r\n  \"superb\",\r\n  \"supportive\",\r\n  \"surprised\",\r\n  \"sweet\",\r\n  \"swift\",\r\n  \"sympathetic\",\r\n  \"trivial\",\r\n  \"trusting\",\r\n  \"trustworthy\",\r\n  \"trusty\",\r\n  \"truthful\",\r\n  \"twin\",\r\n  \"usable\",\r\n  \"used\",\r\n  \"useful\",\r\n  \"utilized\",\r\n  \"vital\",\r\n  \"vivid\",\r\n  \"worried\",\r\n  \"worthwhile\",\r\n  \"worthy\",\r\n  \"writhing\",\r\n  \"wry\",\r\n  \"yummy\",\r\n  \"chocolate\",\r\n  \"crimson\",\r\n  \"cyan\",\r\n  \"fuchsia\",\r\n  \"gold\",\r\n  \"honeydew\",\r\n  \"lime\",\r\n  \"linen\",\r\n  \"magenta\",\r\n  \"olive\",\r\n  \"peru\",\r\n  \"salmon\",\r\n  \"seashell\",\r\n  \"sienna\",\r\n  \"snow\",\r\n  \"thistle\",\r\n  \"tomato\",\r\n  \"transparent\",\r\n  \"turquoise\",\r\n  \"violet\"\r\n];\r\n\r\nconst nouns = [\r\n  \"space\",\r\n  \"land\",\r\n  \"world\",\r\n  \"universe\",\r\n  \"plane\",\r\n  \"room\",\r\n  \"nation\",\r\n  \"plaza\",\r\n  \"gathering\",\r\n  \"meetup\",\r\n  \"get together\",\r\n  \"conclave\",\r\n  \"party\",\r\n  \"domain\",\r\n  \"dominion\",\r\n  \"realm\",\r\n  \"square\",\r\n  \"commons\",\r\n  \"park\",\r\n  \"cosmos\",\r\n  \"sphere\",\r\n  \"terrain\",\r\n  \"spot\",\r\n  \"zone\",\r\n  \"area\",\r\n  \"tract\",\r\n  \"turf\",\r\n  \"place\",\r\n  \"territory\",\r\n  \"volume\",\r\n  \"camp\",\r\n  \"picnic\",\r\n  \"outing\",\r\n  \"vacation\",\r\n  \"adventure\",\r\n  \"exploration\",\r\n  \"outing\",\r\n  \"walkabout\",\r\n  \"safari\",\r\n  \"venture\",\r\n  \"roundtable\",\r\n  \"barbecue\",\r\n  \"celebration\",\r\n  \"festivity\",\r\n  \"gala\",\r\n  \"shindig\",\r\n  \"social\",\r\n  \"convention\",\r\n  \"assembly\",\r\n  \"congregation\",\r\n  \"rendezvous\",\r\n  \"huddle\",\r\n  \"meet\",\r\n  \"soiree\"\r\n];\r\n\r\nexport function generateHubName() {\r\n  const randItem = set => {\r\n    const s = set[Math.floor(Math.random() * set.length)];\r\n    return s.charAt(0).toUpperCase() + s.slice(1);\r\n  };\r\n\r\n  return `${randItem(adjectives)} ${randItem(adjectives)} ${randItem(nouns)}`;\r\n}\r\n","import { Socket } from \"phoenix\";\r\nimport { generateHubName } from \"../utils/name-generation\";\r\nimport configs from \"../utils/configs\";\r\n\r\nimport Store from \"../storage/store\";\r\n\r\nexport function hasReticulumServer() {\r\n  return !!configs.RETICULUM_SERVER;\r\n}\r\n\r\nexport function isLocalClient() {\r\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\r\n}\r\n\r\nconst resolverLink = document.createElement(\"a\");\r\nlet reticulumMeta = null;\r\nlet invalidatedReticulumMetaThisSession = false;\r\n\r\nexport function getReticulumFetchUrl(path, absolute = false, host = null, port = null) {\r\n  if (host || hasReticulumServer()) {\r\n    return `https://${host || configs.RETICULUM_SERVER}${port ? `:${port}` : \"\"}${path}`;\r\n  } else if (absolute) {\r\n    resolverLink.href = path;\r\n    return resolverLink.href;\r\n  } else {\r\n    return path;\r\n  }\r\n}\r\n\r\nexport async function getReticulumMeta() {\r\n  if (!reticulumMeta) {\r\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\r\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\r\n      reticulumMeta = {\r\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\r\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\r\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\r\n      };\r\n    } else {\r\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\r\n        reticulumMeta = await res.json();\r\n      });\r\n    }\r\n  }\r\n\r\n  const qs = new URLSearchParams(location.search);\r\n  const phxHostOverride = qs.get(\"phx_host\");\r\n\r\n  if (phxHostOverride) {\r\n    reticulumMeta.phx_host = phxHostOverride;\r\n  }\r\n\r\n  return reticulumMeta;\r\n}\r\n\r\nlet directReticulumHostAndPort;\r\n\r\nasync function refreshDirectReticulumHostAndPort() {\r\n  const qs = new URLSearchParams(location.search);\r\n  let host = qs.get(\"phx_host\");\r\n  const reticulumMeta = await getReticulumMeta();\r\n  host = host || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\r\n  const port =\r\n    qs.get(\"phx_port\") ||\r\n    (hasReticulumServer() ? new URL(`${document.location.protocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\r\n  directReticulumHostAndPort = { host, port };\r\n}\r\n\r\nexport function getDirectReticulumFetchUrl(path, absolute = false) {\r\n  if (!directReticulumHostAndPort) {\r\n    console.warn(\"Cannot call getDirectReticulumFetchUrl before connectToReticulum. Returning non-direct url.\");\r\n    return getReticulumFetchUrl(path, absolute);\r\n  }\r\n\r\n  const { host, port } = directReticulumHostAndPort;\r\n  return getReticulumFetchUrl(path, absolute, host, port);\r\n}\r\n\r\nexport async function invalidateReticulumMeta() {\r\n  invalidatedReticulumMetaThisSession = true;\r\n  reticulumMeta = null;\r\n}\r\n\r\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\r\n  const qs = new URLSearchParams(location.search);\r\n\r\n  const getNewSocketUrl = async () => {\r\n    await refreshDirectReticulumHostAndPort();\r\n    const { host, port } = directReticulumHostAndPort;\r\n    const protocol =\r\n      qs.get(\"phx_protocol\") ||\r\n      configs.RETICULUM_SOCKET_PROTOCOL ||\r\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\r\n\r\n    return `${protocol}//${host}${port ? `:${port}` : \"\"}`;\r\n  };\r\n\r\n  const socketUrl = await getNewSocketUrl();\r\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\r\n\r\n  const socketSettings = {};\r\n\r\n  if (debug) {\r\n    socketSettings.logger = (kind, msg, data) => {\r\n      console.log(`${kind}: ${msg}`, data);\r\n    };\r\n  }\r\n\r\n  if (params) {\r\n    socketSettings.params = params;\r\n  }\r\n\r\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\r\n  socket.connect();\r\n  socket.onError(async () => {\r\n    // On error, underlying reticulum node may have died, so rebalance by\r\n    // fetching a new healthy node to connect to.\r\n    invalidateReticulumMeta();\r\n\r\n    const endPointPath = new URL(socket.endPoint).pathname;\r\n    const newSocketUrl = await getNewSocketUrl();\r\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\r\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\r\n    socket.endPoint = newEndPoint;\r\n  });\r\n\r\n  return socket;\r\n}\r\n\r\nexport function getLandingPageForPhoto(photoUrl) {\r\n  const parsedUrl = new URL(photoUrl);\r\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\r\n}\r\n\r\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\r\n  const { token } = window.APP.store.state.credentials;\r\n  const retUrl = getReticulumFetchUrl(url);\r\n  const params = {\r\n    headers: { \"content-type\": \"application/json\" },\r\n    method\r\n  };\r\n  if (token) {\r\n    params.headers.authorization = `bearer ${token}`;\r\n  }\r\n  if (payload) {\r\n    params.body = JSON.stringify(payload);\r\n  }\r\n  return fetch(retUrl, params).then(async r => {\r\n    const result = await r.text();\r\n    try {\r\n      return JSON.parse(result);\r\n    } catch (e) {\r\n      // Some reticulum responses, particularly DELETE requests, don't return json.\r\n      return result;\r\n    }\r\n  });\r\n}\r\n\r\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\r\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\r\n  const payload = { hub: { name: name || generateHubName() } };\r\n\r\n  if (sceneId) {\r\n    payload.hub.scene_id = sceneId;\r\n  }\r\n\r\n  const headers = { \"content-type\": \"application/json\" };\r\n  const store = new Store();\r\n  if (store.state && store.state.credentials.token) {\r\n    headers.authorization = `bearer ${store.state.credentials.token}`;\r\n  }\r\n\r\n  let res = await fetch(createUrl, {\r\n    body: JSON.stringify(payload),\r\n    headers,\r\n    method: \"POST\"\r\n  }).then(r => r.json());\r\n\r\n  if (res.error === \"invalid_token\") {\r\n    // Clear the invalid token from store.\r\n    store.update({ credentials: { token: null, email: null } });\r\n\r\n    // Create hub anonymously\r\n    delete headers.authorization;\r\n    res = await fetch(createUrl, {\r\n      body: JSON.stringify(payload),\r\n      headers,\r\n      method: \"POST\"\r\n    }).then(r => r.json());\r\n  }\r\n\r\n  const hub = res;\r\n  let url = hub.url;\r\n\r\n  const creatorAssignmentToken = hub.creator_assignment_token;\r\n  if (creatorAssignmentToken) {\r\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\r\n\r\n    // Don't need to store the embed token if there's no creator assignment token, since that means\r\n    // we are the owner and will get the embed token on page load.\r\n    const embedToken = hub.embed_token;\r\n\r\n    if (embedToken) {\r\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\r\n    }\r\n  }\r\n\r\n  if (isLocalClient()) {\r\n    url = `${process.env.BASE_ASSETS_PATH}/hub.html?hub_id=${hub.hub_id}`;\r\n  }\r\n\r\n  if (replace) {\r\n    document.location.replace(url);\r\n  } else {\r\n    document.location = url;\r\n  }\r\n}\r\n\r\nexport function getPresenceEntryForSession(presences, sessionId) {\r\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\r\n  const presence = entry[1];\r\n  return (presence && presence.metas && presence.metas[0]) || {};\r\n}\r\n\r\nexport function getPresenceContextForSession(presences, sessionId) {\r\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\r\n}\r\n\r\nexport function getPresenceProfileForSession(presences, sessionId) {\r\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\r\n}\r\n\r\n// Takes the given channel, and creates a new channel with the same bindings\r\n// with the given socket, joins it, and leaves the old channel after joining.\r\n//\r\n// NOTE: This function relies upon phoenix channel object internals, so this\r\n// function will need to be reviewed if/when we ever update phoenix.js\r\nexport function migrateChannelToSocket(oldChannel, socket, params) {\r\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\r\n\r\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\r\n    const item = oldChannel.bindings[i];\r\n    channel.on(item.event, item.callback);\r\n  }\r\n\r\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\r\n    const item = oldChannel.pushBuffer[i];\r\n    channel.push(item.event, item.payload, item.timeout);\r\n  }\r\n\r\n  const oldJoinPush = oldChannel.joinPush;\r\n  const joinPush = channel.join();\r\n\r\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\r\n    const item = oldJoinPush.recHooks[i];\r\n    joinPush.receive(item.status, item.callback);\r\n  }\r\n\r\n  return new Promise(resolve => {\r\n    joinPush.receive(\"ok\", () => {\r\n      // Clear all event handlers first so no duplicate messages come in.\r\n      oldChannel.bindings = [];\r\n      resolve(channel);\r\n    });\r\n  });\r\n}\r\n\r\nexport function discordBridgesForPresences(presences) {\r\n  const channels = [];\r\n  for (const p of Object.values(presences)) {\r\n    for (const m of p.metas) {\r\n      if (m.profile && m.profile.discordBridges) {\r\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\r\n      }\r\n    }\r\n  }\r\n  return channels;\r\n}\r\n","module.exports = __webpack_public_path__ + \"assets/models/DuckyMesh-04f978955fb12d48f7ff8c59a05de439.glb\";","import screenfull from \"screenfull\";\r\n\r\nlet hasEnteredFullScreenThisSession = false;\r\n\r\nfunction shouldShowFullScreen() {\r\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\r\n  return (\r\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\r\n    !AFRAME.utils.device.isIOS() &&\r\n    screenfull.enabled\r\n  );\r\n}\r\n\r\nexport function willRequireUserGesture() {\r\n  return !screenfull.isFullscreen && shouldShowFullScreen();\r\n}\r\n\r\nexport async function showFullScreenIfAvailable() {\r\n  if (shouldShowFullScreen()) {\r\n    hasEnteredFullScreenThisSession = true;\r\n    await screenfull.request();\r\n  }\r\n}\r\n\r\nexport async function showFullScreenIfWasFullScreen() {\r\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\r\n    await screenfull.request();\r\n  }\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__1nkHJ\",\"emailField\":\"sign-in-dialog__email-field__1nkHJ\",\"next-button\":\"sign-in-dialog__next-button__3yK4L\",\"nextButton\":\"sign-in-dialog__next-button__3yK4L\",\"continue-button\":\"sign-in-dialog__continue-button__3w7HU\",\"continueButton\":\"sign-in-dialog__continue-button__3w7HU\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__1arl9\",\"signInForm\":\"sign-in-dialog__sign-in-form__1arl9\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__25NJE\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__25NJE\",\"terms\":\"sign-in-dialog__terms__3j0oq\"};","import { waitForDOMContentLoaded } from \"./async-utils\";\r\nimport \"./configs\";\r\n\r\n// Node these should be synchronized with the top of shared.scss\r\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\r\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\r\n\r\nconst DEFAULT_COLORS = {\r\n  \"action-color\": DEFAULT_ACTION_COLOR,\r\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\r\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\r\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\r\n  \"action-text-color\": \"#FFFFFF\",\r\n  \"action-subtitle-color\": \"#F0F0F0\",\r\n  \"notice-background-color\": \"#2F80ED\",\r\n  \"notice-text-color\": \"#FFFFFF\",\r\n  \"favorited-color\": \"#FFC000\"\r\n};\r\n\r\nfunction getThemeColor(name) {\r\n  if (window.APP_CONFIG && window.APP_CONFIG.theme && window.APP_CONFIG.theme[name])\r\n    return window.APP_CONFIG.theme[name];\r\n\r\n  return DEFAULT_COLORS[name];\r\n}\r\n\r\nwaitForDOMContentLoaded().then(() => {\r\n  if (window.APP_CONFIG && window.APP_CONFIG.theme && window.APP_CONFIG.theme[\"dark-theme\"]) {\r\n    document.body.classList.add(\"dark-theme\");\r\n  } else {\r\n    document.body.classList.add(\"light-theme\");\r\n  }\r\n\r\n  const actionColor = getThemeColor(\"action-color\");\r\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\r\n\r\n  if (document.querySelector(\"#rounded-text-button\")) {\r\n    // NOTE, using the object-based {} setAttribute variant in a-frame\r\n    // seems to not work in Firefox here -- the entities with the mixins are not\r\n    // updated.\r\n    document\r\n      .querySelector(\"#rounded-text-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\r\n      );\r\n\r\n    document\r\n      .querySelector(\"#rounded-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\r\n      );\r\n\r\n    document\r\n      .querySelector(\"#rounded-text-action-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\r\n      );\r\n\r\n    document\r\n      .querySelector(\"#rounded-action-button\")\r\n      .setAttribute(\r\n        \"text-button\",\r\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\r\n      );\r\n  }\r\n});\r\n\r\nfunction applyThemeToTextButton(el, highlighted) {\r\n  el.setAttribute(\r\n    \"text-button\",\r\n    \"backgroundColor\",\r\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\r\n  );\r\n  el.setAttribute(\r\n    \"text-button\",\r\n    \"backgroundHoverColor\",\r\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\r\n  );\r\n}\r\n\r\nexport { applyThemeToTextButton, getThemeColor };\r\n"],"sourceRoot":""}